import{y as M,r as v,c as A,z as H,e as n,g as y,f as b,w as a,d as t,k as P,h as J,l as d,t as K,p as Q}from"./index-BV9e5Yt5.js";import{u as W,a as X,e as Y}from"./ProyectoEstructuraView-DVKqiHsd.js";import{S as C}from"./selectOptions-B5pGCBUk.js";import"./proyectoStore-DvgR2axb.js";import"./proyectoService-wNf4fISD.js";import"./PaginaTituloIcono-CW0YRi1P.js";import"./ProyectoHeader-D5OgEq0F.js";import"./formatters-CqNDYFfu.js";import"./useInstanciaGestora-cSU6cze7.js";import"./peiService-DMb0o3t4.js";import"./xlsx-CM-TUkP_.js";import"./useProcedenciaFondos-DCzG2v-v.js";import"./ConfirmDialog-C6-Dbl5P.js";import"./useConfirmDialog-D-apekYG.js";/* empty css                                                                               */const ve={__name:"IndicadorResOgNodoForm",props:{node:{type:Object,required:!0,default:()=>({id:null,data:{nodoProyecto:{codigo:"",descripcion:""}}})}},emits:["guardar","cancelar","eliminar"],setup(q,{emit:x}){const m=q,{updateIndicadorResultadoObjetivoGeneral:U}=Y(),{getNodes:w,getEdges:E,updateNode:N}=W(),{actualizarNodosEdges:k}=X(),T=C.tipos_indicador,D=C.redaccion_indicador,O=x,S=M("proyectoEstructura"),o=v({...m.node.data}),p=v(!1),u=v(!1),f=A(()=>!m.node.id);H(()=>m.node,r=>{o.value={...r.data}},{deep:!0});const I=async()=>{try{const r=o.value.nodoProyecto.id,e=S.value.mapa_nodo.id;console.log(r),console.log(e),await U(r,o.value.nodoProyecto),N(o.value.id,o.value),await k(e,w.value,E.value),O("guardar")}catch(r){console.error("Update informacion",r)}},j=()=>{u.value=!0},B=async()=>{u.value=!1,p.value=!0};return(r,e)=>{const i=n("v-text-field"),c=n("v-textarea"),_=n("v-select"),g=n("v-spacer"),s=n("v-btn"),V=n("v-card-actions"),F=n("v-icon"),R=n("v-card-title"),$=n("v-card-text"),z=n("v-card"),G=n("v-dialog"),L=n("v-form");return b(),y(L,{onSubmit:Q(I,["prevent"])},{default:a(()=>[t(i,{modelValue:o.value.nodoProyecto.codigo,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.nodoProyecto.codigo=l),variant:"outlined",label:"Codigo",outlined:"",dense:"",clearable:"",rules:[l=>!!l||"Código requerido"]},null,8,["modelValue","rules"]),t(c,{modelValue:o.value.nodoProyecto.descripcion,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.nodoProyecto.descripcion=l),variant:"outlined",label:"Descripcion",outlined:"",dense:"",clearable:"",rows:"3"},null,8,["modelValue"]),t(c,{modelValue:o.value.nodoProyecto.definicion,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.nodoProyecto.definicion=l),variant:"outlined",label:"Definicion",outlined:"",dense:"",clearable:"",rows:"3"},null,8,["modelValue"]),t(_,{modelValue:o.value.nodoProyecto.redaccion,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.nodoProyecto.redaccion=l),variant:"outlined",items:P(D),"item-value":"valor","item-title":"etiqueta",label:"Redaccion"},null,8,["modelValue","items"]),t(c,{modelValue:o.value.nodoProyecto.fuente_verificacion,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.nodoProyecto.fuente_verificacion=l),variant:"outlined",label:"Fuentes de verificacion",outlined:"",dense:"",clearable:"",rows:"3"},null,8,["modelValue"]),t(i,{modelValue:o.value.nodoProyecto.target_poblacion,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.nodoProyecto.target_poblacion=l),variant:"outlined",label:"Target poblacion",outlined:"",dense:"",clearable:"",type:"number"},null,8,["modelValue"]),t(_,{modelValue:o.value.nodoProyecto.tipo,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.nodoProyecto.tipo=l),variant:"outlined",items:P(T),"item-value":"valor","item-title":"etiqueta",label:"Tipo de indicador"},null,8,["modelValue","items"]),t(i,{modelValue:o.value.nodoProyecto.baseline,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.nodoProyecto.baseline=l),variant:"outlined",label:"Baseline",outlined:"",dense:"",clearable:"",type:"number"},null,8,["modelValue"]),t(i,{modelValue:o.value.nodoProyecto.target_q1,"onUpdate:modelValue":e[8]||(e[8]=l=>o.value.nodoProyecto.target_q1=l),variant:"outlined",label:"Target q1",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),t(i,{modelValue:o.value.nodoProyecto.target_q2,"onUpdate:modelValue":e[9]||(e[9]=l=>o.value.nodoProyecto.target_q2=l),variant:"outlined",label:"Target q2",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),t(i,{modelValue:o.value.nodoProyecto.target_q3,"onUpdate:modelValue":e[10]||(e[10]=l=>o.value.nodoProyecto.target_q3=l),variant:"outlined",label:"Target q3",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),t(V,null,{default:a(()=>[t(g),f.value?J("",!0):(b(),y(s,{key:0,color:"error",text:"",onClick:j},{default:a(()=>e[14]||(e[14]=[d(" Eliminar ")])),_:1,__:[14]})),t(s,{color:"error",text:"",onClick:e[11]||(e[11]=l=>r.$emit("cancelar"))},{default:a(()=>e[15]||(e[15]=[d("Cancelar")])),_:1,__:[15]}),t(s,{color:"primary",type:"submit",loading:p.value},{default:a(()=>[d(K(f.value?"Crear":"Guardar"),1)]),_:1},8,["loading"])]),_:1}),t(G,{modelValue:u.value,"onUpdate:modelValue":e[13]||(e[13]=l=>u.value=l),"max-width":"400"},{default:a(()=>[t(z,null,{default:a(()=>[t(R,{class:"text-h6"},{default:a(()=>[t(F,{left:"",color:"error"},{default:a(()=>e[16]||(e[16]=[d("mdi-alert-circle")])),_:1,__:[16]}),e[17]||(e[17]=d(" Confirmar eliminación "))]),_:1,__:[17]}),t($,null,{default:a(()=>e[18]||(e[18]=[d(" ¿Está seguro que desea eliminar este elemento? ")])),_:1,__:[18]}),t(V,null,{default:a(()=>[t(g),t(s,{color:"grey",variant:"text",onClick:e[12]||(e[12]=l=>u.value=!1)},{default:a(()=>e[19]||(e[19]=[d(" Cancelar ")])),_:1,__:[19]}),t(s,{color:"error",variant:"flat",onClick:B},{default:a(()=>e[20]||(e[20]=[d(" Confirmar ")])),_:1,__:[20]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{ve as default};
