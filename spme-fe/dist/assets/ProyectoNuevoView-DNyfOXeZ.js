import{x as Ve,r as N,a as fe,e as a,g as j,f as v,w as o,d as e,k as V,_ as ve,i as c,t as _,l as i,b as k,F as Q,j as K,p as ge,c as Z,z as Pe,h as $,y as _e,a2 as ce,s as Ie,o as we,D as je}from"./index-BV9e5Yt5.js";import{P as Re}from"./PaginaTituloIcono-CW0YRi1P.js";const se=Ve("nuevoProyecto",()=>{const w={GUIA:"GUIA",SMART:"SMART"},r={LITERAL:"a-z",NUMERICO:"1-9",PORCENTUAL:"%"},g=N(!1),E=N(1),p=fe({proyecto:{codigo:"",titulo:"",descripcion:"",fecha_creacion:new Date().toISOString().split("T")[0],fecha_inicio:"",fecha_finalizacion:"",instancia_gestora:"",registrado:"",estado:"EST"},objetivoGeneral:[{codigo:"POO",descripcion:"",supuestos:"",riesgos:""}],objetivoEspecifico:[{codigo:"PSO1",descripcion:"",supuestos:"",riesgos:""}],resultados:[{codigo:"R01",descripcion:"",supuestos:"",riesgos:""}],productos:[{codigo:"P01",descripcion:"",supuestos:"",riesgos:""}],indicadores:{objetivoGeneral:[],objetivoEspecifico:[],resultado:[],producto:[]},actividades:[],lineasAccion:[],modalIndicador:null}),R=(u,n)=>{const m={objetivoEspecifico:"PSO",resultado:"R",producto:"P",actividad:"ACT",indicador:"IND"},q=(n+1).toString().padStart(2,"0");return`${m[u]}${q}`},t=(u,n)=>{const m={objetivoGeneral:"IND-OG",objetivoEspecifico:"IND-OE",resultado:"IND-R",producto:"IND-P"},q=(n+1).toString().padStart(2,"0");return`${m[u]}${q}`},d=(u,n)=>{const m=p.indicadores[u].length;return{codigo:t(u,m),tipo:w.SMART,tipo_valor:n,redaccion:"",fuente_verificacion:"",target_poblacion:"",baseline:"",target_q1:"",target_q2:"",target_q3:"",target_q4:"",componente_id:null}},I=u=>{const n=d(u,r.LITERAL);p.indicadores[u].push(n)},O=u=>{const n=d(u,r.NUMERICO);p.indicadores[u].push(n)},l=u=>{const n=d(u,r.PORCENTUAL);p.indicadores[u].push(n)},y=(u,n)=>{n>=0&&p.indicadores[u].length>0&&(p.indicadores[u].splice(n,1),p.indicadores[u].forEach((m,q)=>{m.codigo=t(u,q)}))},x=(u,n,m)=>{p.indicadores[u][n].componente_id=m},H=()=>{const u=p.objetivoEspecifico.length;p.objetivoEspecifico.push({codigo:R("objetivoEspecifico",u),descripcion:"",supuestos:"",riesgos:""})},S=u=>{u>0&&p.objetivoEspecifico.length>1&&(p.objetivoEspecifico.splice(u,1),p.objetivoEspecifico.forEach((n,m)=>{n.codigo=R("objetivoEspecifico",m)}))},B=()=>{const u=p.productos.length;p.productos.push({codigo:R("producto",u),descripcion:"",supuestos:"",riesgos:""})},T=u=>{u>=0&&p.productos.length>0&&(p.productos.splice(u,1),p.productos.forEach((n,m)=>{n.codigo=R("producto",m)}))},A=()=>{const u=p.resultados.length;p.resultados.push({codigo:R("resultado",u),descripcion:"",supuestos:"",riesgos:""})},b=u=>{u>=0&&p.resultados.length>0&&(p.resultados.splice(u,1),p.resultados.forEach((n,m)=>{n.codigo=R("resultado",m)}))},U=u=>{const n=p.actividades.length;p.actividades.push({codigo:R("actividad",n),tipo:u,descripcion:"",fecha_inicio:"",fecha_fin:"",estado:"PLAN"})},X=u=>{u>=0&&(p.actividades.splice(u,1),p.actividades.forEach((n,m)=>{n.codigo=R("actividad",m)}))},J=()=>{if(!p.proyecto.titulo.trim())throw new Error("El título del proyecto es requerido");if(!p.proyecto.descripcion.trim())throw new Error("La descripción del proyecto es requerida");if(!p.objetivoGeneral[0].descripcion.trim())throw new Error("La descripción del objetivo general es requerida")},f=async()=>{g.value=!0;try{J();const u={...p.proyecto,objetivos:{general:p.objetivoGeneral[0],especificos:p.objetivoEspecifico},resultados:p.resultados,productos:p.productos,indicadores:p.indicadores,actividades:p.actividades,lineasAccion:p.lineasAccion};console.log("Enviando proyecto:",u),C()}catch(u){throw console.error("Error al enviar el proyecto:",u),u}finally{g.value=!1}},C=()=>{Object.assign(p,{proyecto:{codigo:"",titulo:"",descripcion:"",fecha_creacion:new Date().toISOString().split("T")[0],fecha_inicio:"",fecha_finalizacion:"",instancia_gestora:"",registrado:"",estado:"EST"},objetivoGeneral:[{codigo:"POO",descripcion:"",supuestos:"",riesgos:""}],objetivoEspecifico:[{codigo:"PSO1",descripcion:"",supuestos:"",riesgos:""}],resultados:[{codigo:"R01",descripcion:"",supuestos:"",riesgos:""}],productos:[{codigo:"P01",descripcion:"",supuestos:"",riesgos:""}],indicadores:{objetivoGeneral:[],objetivoEspecifico:[],resultado:[],producto:[]},actividades:[],lineasAccion:[]}),E.value=1},P=(u,n=null,m=null)=>{p.modalIndicador={mode:n!==null?"edit":"create",tipoComponente:u,indice:n,componentePadreIndex:m}},s=()=>{p.modalIndicador=null},D=async({componentePadreIndex:u,indicador:n})=>{try{const m=n.tipoElementoRelacionado;if(!n.codigo){const W=p.indicadores[m].length;n.codigo=t(m,W)}if(u!==null&&m){const W=M(m,u);n.componente_id=W.codigo}const q={codigo:n.codigo,tipo:n.tipo||w.SMART,tipo_valor:n.tipo_valor,redaccion:n.redaccion,fuente_verificacion:n.fuente_verificacion,target_poblacion:n.target_poblacion,baseline:n.baseline,target_q1:n.target_q1,target_q2:n.target_q2,target_q3:n.target_q3,target_q4:n.target_q4,componente_id:n.componente_id||null};return p.indicadores[m].push(q),!0}catch(m){throw console.error("Error agregando indicador:",m),m}},G=async({componentePadreIndex:u,indicador:n,indiceIndicador:m})=>{try{const q=n.tipoElementoRelacionado;if(u!==null&&q){const ee=M(q,u);n.componente_id=ee.codigo}const W={codigo:n.codigo,tipo:n.tipo,tipo_valor:n.tipo_valor,redaccion:n.redaccion,fuente_verificacion:n.fuente_verificacion,target_poblacion:n.target_poblacion,baseline:n.baseline,target_q1:n.target_q1,target_q2:n.target_q2,target_q3:n.target_q3,target_q4:n.target_q4,componente_id:n.componente_id||null};return m!==null&&m>=0?(p.indicadores[q][m]=W,!0):!1}catch(q){throw console.error("Error actualizando indicador:",q),q}},M=(u,n)=>({objetivoGeneral:p.objetivoGeneral,objetivoEspecifico:p.objetivoEspecifico,resultado:p.resultados,producto:p.productos})[u][n];return{cargando:g,pasoActual:E,nuevoProyecto:p,TIPOS_INDICADOR:w,TIPOS_VALOR:r,addObjetivoEspecifico:H,removeObjetivoEspecifico:S,addProducto:B,removeProducto:T,addResultado:A,removeResultado:b,addActividad:U,removeActividad:X,enviarProyecto:f,resetProyecto:C,validarProyecto:J,addIndicadorLiteral:I,addIndicadorNumerico:O,addIndicadorPorcentual:l,removeIndicador:y,vincularIndicador:x,abrirModalIndicador:P,cerrarModalIndicador:s,agregarIndicador:D,actualizarIndicador:G}}),ke={__name:"NewProyectoTab",setup(w){const r=se(),g=[{idpei:1,pei:"PEI 2024 - 2027"}],E=N(1),p=["Direccion ejecutiva","Comunicacion","Planificacion, monitoreo y evaluacion","Desarrollo de redes","Programa urbano","Programa Nina","Programa defensores","Administracion"];return(R,t)=>{const d=a("v-select"),I=a("v-text-field"),O=a("v-textarea"),l=a("v-divider"),y=a("v-card");return v(),j(y,{title:"Proyecto",subtitle:"Informacion General"},{default:o(()=>[e(d,{variant:"outlined",modelValue:E.value,"onUpdate:modelValue":t[0]||(t[0]=x=>E.value=x),items:g,"item-title":"pei","item-value":"idpei",label:"Pertenece a",readonly:""},null,8,["modelValue"]),e(I,{variant:"outlined",modelValue:V(r).nuevoProyecto.proyecto.codigo,"onUpdate:modelValue":t[1]||(t[1]=x=>V(r).nuevoProyecto.proyecto.codigo=x),label:"Código",required:""},null,8,["modelValue"]),e(I,{variant:"outlined",modelValue:V(r).nuevoProyecto.proyecto.titulo,"onUpdate:modelValue":t[2]||(t[2]=x=>V(r).nuevoProyecto.proyecto.titulo=x),label:"Titulo del proyecto"},null,8,["modelValue"]),e(O,{variant:"outlined",modelValue:V(r).nuevoProyecto.proyecto.descripcion,"onUpdate:modelValue":t[3]||(t[3]=x=>V(r).nuevoProyecto.proyecto.descripcion=x),label:"Descripcion"},null,8,["modelValue"]),e(l,{class:"my-4"}),e(I,{label:"Fecha de creacion",modelValue:V(r).nuevoProyecto.proyecto.fecha_creacion,"onUpdate:modelValue":t[4]||(t[4]=x=>V(r).nuevoProyecto.proyecto.fecha_creacion=x),type:"date",variant:"outlined"},null,8,["modelValue"]),e(I,{label:"Fecha de inicio",modelValue:V(r).nuevoProyecto.proyecto.fecha_inicio,"onUpdate:modelValue":t[5]||(t[5]=x=>V(r).nuevoProyecto.proyecto.fecha_inicio=x),type:"date",variant:"outlined"},null,8,["modelValue"]),e(I,{label:"Fecha de finalizacion",modelValue:V(r).nuevoProyecto.proyecto.fecha_finalizacion,"onUpdate:modelValue":t[6]||(t[6]=x=>V(r).nuevoProyecto.proyecto.fecha_finalizacion=x),type:"date",variant:"outlined"},null,8,["modelValue"]),e(l,{class:"my-4"}),e(I,{label:"Responsable",modelValue:V(r).nuevoProyecto.proyecto.registrado,"onUpdate:modelValue":t[7]||(t[7]=x=>V(r).nuevoProyecto.proyecto.registrado=x),variant:"outlined"},null,8,["modelValue"]),e(d,{variant:"outlined",modelValue:V(r).nuevoProyecto.proyecto.instancia_gestora,"onUpdate:modelValue":t[8]||(t[8]=x=>V(r).nuevoProyecto.proyecto.instancia_gestora=x),label:"Instacia gestora",items:p},null,8,["modelValue"])]),_:1})}}},Ae={__name:"NewObetivosTab",setup(w){const r=se(),g=r.addObjetivoEspecifico,E=t=>{r.removeObjetivoEspecifico(t),p.value===`specific-${t}`&&(p.value="general")},p=N("general"),R=N(!1);return(t,d)=>{const I=a("v-icon"),O=a("v-tooltip"),l=a("v-btn"),y=a("v-card-title"),x=a("v-card-subtitle"),H=a("v-card-item"),S=a("v-tab"),B=a("v-tabs"),T=a("v-text-field"),A=a("v-textarea"),b=a("v-card"),U=a("v-window-item"),X=a("v-window"),J=a("v-card-text");return v(),j(b,{class:"my-card"},{default:o(()=>[e(H,null,{default:o(()=>[e(y,{class:"d-flex justify-space-between align-center mb-4"},{default:o(()=>[c("span",null,_(V(r).nuevoProyecto.proyecto.titulo),1),e(l,{icon:"",onClick:V(g),color:"primary",size:"small",disabled:R.value},{default:o(()=>[e(I,null,{default:o(()=>d[5]||(d[5]=[i("mdi-plus")])),_:1,__:[5]}),e(O,{activator:"parent",location:"top"},{default:o(()=>d[6]||(d[6]=[i("Agregar objetivo específico")])),_:1,__:[6]})]),_:1},8,["onClick","disabled"])]),_:1}),e(x,null,{default:o(()=>[i(" Código: "+_(V(r).nuevoProyecto.proyecto.codigo),1)]),_:1})]),_:1}),e(J,null,{default:o(()=>[e(B,{modelValue:p.value,"onUpdate:modelValue":d[0]||(d[0]=f=>p.value=f)},{default:o(()=>[e(S,{value:"general",disabled:R.value},{default:o(()=>[e(I,{start:""},{default:o(()=>d[7]||(d[7]=[i("mdi-bullseye")])),_:1,__:[7]}),d[9]||(d[9]=i(" Objetivo General ")),e(O,{activator:"parent",location:"bottom"},{default:o(()=>d[8]||(d[8]=[i(" Este objetivo no se puede eliminar ")])),_:1,__:[8]})]),_:1,__:[9]},8,["disabled"]),(v(!0),k(Q,null,K(V(r).nuevoProyecto.objetivoEspecifico,(f,C)=>(v(),j(S,{key:"obj-"+C,value:"specific-"+C,disabled:R.value},{default:o(()=>[e(I,{start:""},{default:o(()=>d[10]||(d[10]=[i("mdi-target")])),_:1,__:[10]}),i(" Obj Espec "+_(C+1)+" ",1),e(l,{icon:"mdi-close",size:"x-small",variant:"text",class:"ml-2",onClick:ge(P=>E(C),["stop"]),disabled:R.value},null,8,["onClick","disabled"])]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"]),e(X,{modelValue:p.value,"onUpdate:modelValue":d[4]||(d[4]=f=>p.value=f)},{default:o(()=>[e(U,{value:"general"},{default:o(()=>[e(b,{flat:"",class:"pa-4"},{default:o(()=>[e(T,{label:"Código",variant:"outlined","model-value":"POO",readonly:""}),e(A,{label:"Descripción",variant:"outlined",modelValue:V(r).nuevoProyecto.objetivoGeneral[0].descripcion,"onUpdate:modelValue":d[1]||(d[1]=f=>V(r).nuevoProyecto.objetivoGeneral[0].descripcion=f),readonly:R.value,rows:"3"},null,8,["modelValue","readonly"]),e(A,{label:"Supuestos",variant:"outlined",modelValue:V(r).nuevoProyecto.objetivoGeneral[0].supuestos,"onUpdate:modelValue":d[2]||(d[2]=f=>V(r).nuevoProyecto.objetivoGeneral[0].supuestos=f),readonly:R.value,rows:"2"},null,8,["modelValue","readonly"]),e(A,{label:"Riesgos",variant:"outlined",modelValue:V(r).nuevoProyecto.objetivoGeneral[0].riesgos,"onUpdate:modelValue":d[3]||(d[3]=f=>V(r).nuevoProyecto.objetivoGeneral[0].riesgos=f),readonly:R.value,rows:"2"},null,8,["modelValue","readonly"])]),_:1})]),_:1}),(v(!0),k(Q,null,K(V(r).nuevoProyecto.objetivoEspecifico,(f,C)=>(v(),j(U,{key:"obj-content-"+C,value:"specific-"+C},{default:o(()=>[e(b,{flat:"",class:"pa-4"},{default:o(()=>[e(T,{"model-value":"PSO"+(C+1),label:"Código",variant:"outlined",readonly:"",disabled:""},null,8,["model-value"]),e(A,{modelValue:f.descripcion,"onUpdate:modelValue":P=>f.descripcion=P,label:`Descripción del Objetivo Específico ${C+1}`,rows:"3",variant:"outlined",readonly:R.value},null,8,["modelValue","onUpdate:modelValue","label","readonly"]),e(A,{modelValue:f.supuestos,"onUpdate:modelValue":P=>f.supuestos=P,label:"Supuestos",variant:"outlined",readonly:R.value,rows:"2"},null,8,["modelValue","onUpdate:modelValue","readonly"]),e(A,{modelValue:f.riesgos,"onUpdate:modelValue":P=>f.riesgos=P,label:"Riesgos",variant:"outlined",readonly:R.value,rows:"2"},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},Ce=ve(Ae,[["__scopeId","data-v-b295a25a"]]),xe={__name:"NewResultadosTab",setup(w){const r=se(),g=N(0),E=N(!1),p=()=>{r.addResultado()},R=t=>{r.removeResultado(t)};return(t,d)=>{const I=a("v-icon"),O=a("v-tooltip"),l=a("v-btn"),y=a("v-card-title"),x=a("v-card-subtitle"),H=a("v-card-item"),S=a("v-tab"),B=a("v-tabs"),T=a("v-text-field"),A=a("v-textarea"),b=a("v-card"),U=a("v-window-item"),X=a("v-window"),J=a("v-card-text");return v(),j(b,{class:"my-card"},{default:o(()=>[e(H,null,{default:o(()=>[e(y,{class:"d-flex justify-space-between align-center mb-4"},{default:o(()=>[c("span",null,"Resultados del Proyecto: "+_(V(r).nuevoProyecto.proyecto.titulo),1),e(l,{icon:"",onClick:p,color:"primary",size:"small",disabled:E.value},{default:o(()=>[e(I,null,{default:o(()=>d[2]||(d[2]=[i("mdi-plus")])),_:1,__:[2]}),e(O,{activator:"parent",location:"top"},{default:o(()=>d[3]||(d[3]=[i("Agregar resultado")])),_:1,__:[3]})]),_:1},8,["disabled"])]),_:1}),e(x,null,{default:o(()=>[i(" Código: "+_(V(r).nuevoProyecto.proyecto.codigo),1)]),_:1})]),_:1}),e(J,null,{default:o(()=>[e(B,{modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=f=>g.value=f)},{default:o(()=>[(v(!0),k(Q,null,K(V(r).nuevoProyecto.resultados,(f,C)=>(v(),j(S,{key:"res-"+C,value:"result-"+C,disabled:E.value},{default:o(()=>[e(I,{start:""},{default:o(()=>d[4]||(d[4]=[i("mdi-checkbox-marked-circle-outline")])),_:1,__:[4]}),i(" Resultado "+_(f.codigo)+" ",1),e(l,{icon:"mdi-close",size:"x-small",variant:"text",onClick:ge(P=>R(C),["stop"]),class:"ml-2",disabled:E.value},null,8,["onClick","disabled"])]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"]),e(X,{modelValue:g.value,"onUpdate:modelValue":d[1]||(d[1]=f=>g.value=f)},{default:o(()=>[(v(!0),k(Q,null,K(V(r).nuevoProyecto.resultados,(f,C)=>(v(),j(U,{key:"res-content-"+C,value:"result-"+C},{default:o(()=>[e(b,{flat:"",class:"pa-4"},{default:o(()=>[e(T,{"model-value":f.codigo,label:"Código",variant:"outlined",readonly:"",disabled:""},null,8,["model-value"]),e(A,{modelValue:f.descripcion,"onUpdate:modelValue":P=>f.descripcion=P,label:"Descripción",rows:"3",variant:"outlined",readonly:E.value},null,8,["modelValue","onUpdate:modelValue","readonly"]),e(A,{modelValue:f.supuestos,"onUpdate:modelValue":P=>f.supuestos=P,label:"Supuestos",variant:"outlined",readonly:E.value,rows:"2"},null,8,["modelValue","onUpdate:modelValue","readonly"]),e(A,{modelValue:f.riesgos,"onUpdate:modelValue":P=>f.riesgos=P,label:"Riesgos",variant:"outlined",readonly:E.value,rows:"2"},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},Oe=ve(xe,[["__scopeId","data-v-fdeff9ab"]]),Ue={__name:"NewProductosTab",setup(w){const r=se(),g=N(0),E=N(!1),p=()=>{r.addProducto()},R=t=>{r.removeProducto(t)};return(t,d)=>{const I=a("v-icon"),O=a("v-tooltip"),l=a("v-btn"),y=a("v-card-title"),x=a("v-card-subtitle"),H=a("v-card-item"),S=a("v-tab"),B=a("v-tabs"),T=a("v-text-field"),A=a("v-textarea"),b=a("v-card"),U=a("v-window-item"),X=a("v-window"),J=a("v-card-text");return v(),j(b,{class:"my-card"},{default:o(()=>[e(H,null,{default:o(()=>[e(y,{class:"d-flex justify-space-between align-center mb-4"},{default:o(()=>[c("span",null,"Productos del Proyecto: "+_(V(r).nuevoProyecto.proyecto.titulo),1),e(l,{icon:"",onClick:p,color:"primary",size:"small",disabled:E.value},{default:o(()=>[e(I,null,{default:o(()=>d[2]||(d[2]=[i("mdi-plus")])),_:1,__:[2]}),e(O,{activator:"parent",location:"top"},{default:o(()=>d[3]||(d[3]=[i("Agregar producto")])),_:1,__:[3]})]),_:1},8,["disabled"])]),_:1}),e(x,null,{default:o(()=>[i(" Código: "+_(V(r).nuevoProyecto.proyecto.codigo),1)]),_:1})]),_:1}),e(J,null,{default:o(()=>[e(B,{modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=f=>g.value=f)},{default:o(()=>[(v(!0),k(Q,null,K(V(r).nuevoProyecto.productos,(f,C)=>(v(),j(S,{key:"prod-"+C,value:"product-"+C,disabled:E.value},{default:o(()=>[e(I,{start:""},{default:o(()=>d[4]||(d[4]=[i("mdi-package-variant")])),_:1,__:[4]}),i(" Producto "+_(f.codigo)+" ",1),e(l,{icon:"mdi-close",size:"x-small",variant:"text",onClick:ge(P=>R(C),["stop"]),class:"ml-2",disabled:E.value},null,8,["onClick","disabled"])]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"]),e(X,{modelValue:g.value,"onUpdate:modelValue":d[1]||(d[1]=f=>g.value=f)},{default:o(()=>[(v(!0),k(Q,null,K(V(r).nuevoProyecto.productos,(f,C)=>(v(),j(U,{key:"prod-content-"+C,value:"product-"+C},{default:o(()=>[e(b,{flat:"",class:"pa-4"},{default:o(()=>[e(T,{"model-value":f.codigo,label:"Código",variant:"outlined",readonly:"",disabled:""},null,8,["model-value"]),e(A,{modelValue:f.descripcion,"onUpdate:modelValue":P=>f.descripcion=P,label:"Descripción",rows:"3",variant:"outlined",readonly:E.value},null,8,["modelValue","onUpdate:modelValue","readonly"]),e(A,{modelValue:f.supuestos,"onUpdate:modelValue":P=>f.supuestos=P,label:"Supuestos",variant:"outlined",readonly:E.value,rows:"2"},null,8,["modelValue","onUpdate:modelValue","readonly"]),e(A,{modelValue:f.riesgos,"onUpdate:modelValue":P=>f.riesgos=P,label:"Riesgos",variant:"outlined",readonly:E.value,rows:"2"},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},Se=ve(Ue,[["__scopeId","data-v-7932c862"]]),Te={key:0},Le={class:"text-subtitle-1 font-weight-bold mb-2"},Ne={key:1,class:"text-grey"},Ge={key:1},$e={key:0},De={key:0},qe={key:0,class:"mb-4"},ze={key:0},Me={class:"mb-4"},Fe={key:1,class:"mb-4"},Qe={key:0},Be={key:1},He={key:2},Je={key:0},Ke={key:1},We={key:2},Xe={key:3},Ye={__name:"IndicadorCreator",props:{tipoRelacion:String,indicadorEditando:Object,componentePadreIndex:Number},setup(w){const r=w,g=se(),E=N(""),p=N(1),R=["Seleccion de relacion","Tipo de indicador","Datos","Confirmacion"],t=N({tipoRelacion:r.tipoRelacion||"",tipo:"",tipo_valor:"",redaccion:"",fuente_verificacion:"",target_poblacion:"",baseline:"",target_q1:"",target_q2:"",target_q3:"",target_q4:"",objetivoGeneral:null,objetivoEspecifico:null,resultado:null,producto:null}),d=Z(()=>{switch(t.value.tipoRelacion){case"objetivoGeneral":return g.nuevoProyecto.objetivoGeneral;case"objetivoEspecifico":return g.nuevoProyecto.objetivoEspecifico;case"resultado":return g.nuevoProyecto.resultados;case"producto":return g.nuevoProyecto.productos;default:return[]}});Pe(()=>t.value.tipoRelacion,(O,l)=>{l&&O!==l&&(t.value[l]=null)});const I=async()=>{var O,l;try{E.value=!0;const y={...t.value,codigoElementoRelacionado:((O=t.value[t.value.tipoRelacion])==null?void 0:O.codigo)||"",descripcionElementoRelacionado:((l=t.value[t.value.tipoRelacion])==null?void 0:l.descripcion)||"",tipoElementoRelacionado:t.value.tipoRelacion,id:Date.now().toString()};r.indicadorEditando?await g.actualizarIndicador({componentePadreIndex:r.componentePadreIndex,indicador:y,indiceIndicador:r.indicadorEditando.index}):await g.agregarIndicador({componentePadreIndex:r.componentePadreIndex,indicador:y}),r.indicadorEditando||(t.value={tipoRelacion:r.tipoRelacion||"",tipo:"",tipo_valor:"",redaccion:"",fuente_verificacion:"",target_poblacion:"",baseline:"",target_q1:"",target_q2:"",target_q3:"",target_q4:"",objetivoGeneral:null,objetivoEspecifico:null,resultado:null,producto:null},p.value=1)}catch(y){console.error("Error al guardar el indicador:",y)}finally{E.value=!1}};return(O,l)=>{const y=a("v-card-title"),x=a("v-stepper-item"),H=a("v-stepper-header"),S=a("v-radio"),B=a("v-radio-group"),T=a("v-select"),A=a("v-col"),b=a("v-divider"),U=a("v-card"),X=a("v-row"),J=a("v-card-text"),f=a("v-stepper-window-item"),C=a("v-text-field"),P=a("v-card-subtitle"),s=a("v-alert"),D=a("v-stepper-window"),G=a("v-stepper"),M=a("v-btn"),u=a("v-spacer"),n=a("v-card-actions");return v(),j(U,null,{default:o(()=>[e(y,{class:"text-h5"},{default:o(()=>l[15]||(l[15]=[i("Gestión de Indicadores")])),_:1,__:[15]}),e(J,null,{default:o(()=>[e(G,{modelValue:p.value,"onUpdate:modelValue":l[12]||(l[12]=m=>p.value=m),"non-linear":""},{default:o(()=>[e(H,null,{default:o(()=>[(v(),k(Q,null,K(R,(m,q)=>e(x,{editable:"",complete:p.value>q+1,key:q,value:q+1},{default:o(()=>[i(_(m),1)]),_:2},1032,["complete","value"])),64))]),_:1}),e(D,null,{default:o(()=>[e(f,{value:1},{default:o(()=>[e(U,{flat:""},{default:o(()=>[e(J,null,{default:o(()=>[e(X,null,{default:o(()=>[e(A,{cols:"12",md:"6",class:"pr-md-4"},{default:o(()=>[e(B,{modelValue:t.value.tipoRelacion,"onUpdate:modelValue":l[0]||(l[0]=m=>t.value.tipoRelacion=m),class:"mb-4"},{default:o(()=>[e(S,{label:"Objetivo General",value:"objetivoGeneral"}),e(S,{label:"Objetivo Específico",value:"objetivoEspecifico"}),e(S,{label:"Resultado",value:"resultado"}),e(S,{label:"Producto",value:"producto"})]),_:1},8,["modelValue"]),t.value.tipoRelacion?(v(),j(T,{key:0,label:`Seleccione ${t.value.tipoRelacion==="objetivoEspecifico"?"objetivo específico":t.value.tipoRelacion}`,items:d.value,"item-title":"descripcion","item-value":"codigo",modelValue:t.value[t.value.tipoRelacion],"onUpdate:modelValue":l[1]||(l[1]=m=>t.value[t.value.tipoRelacion]=m),"return-object":"",variant:"outlined"},null,8,["label","items","modelValue"])):$("",!0)]),_:1}),e(A,{cols:"12",md:"6",class:"pl-md-4"},{default:o(()=>[e(U,{variant:"outlined",class:"pa-4"},{default:o(()=>[e(y,{class:"text-h6"},{default:o(()=>l[16]||(l[16]=[i("Previsualización")])),_:1,__:[16]}),e(b,{class:"my-2"}),t.value.tipoRelacion?(v(),k("div",Te,[c("h4",Le,_(t.value.tipoRelacion==="objetivoEspecifico"?"Objetivo Específico":t.value.tipoRelacion==="resultado"?"Resultado":t.value.tipoRelacion==="producto"?"Producto":"Objetivo General"),1),t.value[t.value.tipoRelacion]?(v(),k(Q,{key:0},[c("p",null,[l[17]||(l[17]=c("strong",null,"Código:",-1)),i(" "+_(t.value[t.value.tipoRelacion].codigo),1)]),c("p",null,[l[18]||(l[18]=c("strong",null,"Descripción:",-1)),i(" "+_(t.value[t.value.tipoRelacion].descripcion),1)])],64)):(v(),k("p",Ne,"Seleccione un elemento")),e(b,{class:"my-3"}),l[21]||(l[21]=c("h4",{class:"text-subtitle-1 font-weight-bold mb-2"}," Configuración del Indicador ",-1)),c("p",null,[l[19]||(l[19]=c("strong",null,"Tipo:",-1)),i(" "+_(t.value.tipo||"No definido"),1)]),c("p",null,[l[20]||(l[20]=c("strong",null,"Tipo de valor:",-1)),i(" "+_(t.value.tipo_valor||"No definido"),1)])])):(v(),k("div",Ge,l[22]||(l[22]=[c("p",{class:"text-grey"},"Seleccione un tipo de relación",-1)])))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{value:2},{default:o(()=>[e(U,{flat:""},{default:o(()=>[e(J,null,{default:o(()=>[e(X,null,{default:o(()=>[e(A,{cols:"12",md:"6",class:"pr-md-4"},{default:o(()=>[e(B,{modelValue:t.value.tipo_valor,"onUpdate:modelValue":l[2]||(l[2]=m=>t.value.tipo_valor=m),class:"mb-4"},{default:o(()=>[e(S,{label:`Literal (${V(g).TIPOS_VALOR.LITERAL})`,value:V(g).TIPOS_VALOR.LITERAL},null,8,["label","value"]),e(S,{label:`Numérico (${V(g).TIPOS_VALOR.NUMERICO})`,value:V(g).TIPOS_VALOR.NUMERICO},null,8,["label","value"]),e(S,{label:`Porcentual (${V(g).TIPOS_VALOR.PORCENTUAL})`,value:V(g).TIPOS_VALOR.PORCENTUAL},null,8,["label","value"])]),_:1},8,["modelValue"]),e(B,{modelValue:t.value.tipo,"onUpdate:modelValue":l[3]||(l[3]=m=>t.value.tipo=m),class:"mt-4"},{default:o(()=>[e(S,{label:`Tipo GUIA (${V(g).TIPOS_INDICADOR.GUIA})`,value:V(g).TIPOS_INDICADOR.GUIA},null,8,["label","value"]),e(S,{label:`Tipo SMART (${V(g).TIPOS_INDICADOR.SMART})`,value:V(g).TIPOS_INDICADOR.SMART},null,8,["label","value"])]),_:1},8,["modelValue"])]),_:1}),e(A,{cols:"12",md:"6",class:"pl-md-4"},{default:o(()=>[e(U,{variant:"outlined",class:"pa-4"},{default:o(()=>[e(y,{class:"text-h6"},{default:o(()=>l[23]||(l[23]=[i("Configuración del Indicador")])),_:1,__:[23]}),e(b,{class:"my-2"}),t.value.tipoRelacion?(v(),k("div",$e,[l[26]||(l[26]=c("h4",{class:"text-subtitle-1 font-weight-bold mb-2"}," Relación seleccionada: ",-1)),c("p",null,[l[24]||(l[24]=c("strong",null,"Tipo:",-1)),i(" "+_(t.value.tipoRelacion==="objetivoEspecifico"?"Objetivo Específico":t.value.tipoRelacion==="resultado"?"Resultado":t.value.tipoRelacion==="producto"?"Producto":"Objetivo General"),1)]),t.value[t.value.tipoRelacion]?(v(),k("p",De,[l[25]||(l[25]=c("strong",null,"Elemento:",-1)),i(" "+_(t.value[t.value.tipoRelacion].descripcion||"Sin descripción"),1)])):$("",!0)])):$("",!0),e(b,{class:"my-3"}),l[31]||(l[31]=c("h4",{class:"text-subtitle-1 font-weight-bold mb-2"},"Tipo de Indicador",-1)),c("p",null,[l[27]||(l[27]=c("strong",null,"Formato:",-1)),i(" "+_(t.value.tipo||"No seleccionado"),1)]),c("p",null,[l[28]||(l[28]=c("strong",null,"Tipo de valor:",-1)),i(" "+_(t.value.tipo_valor||"No seleccionado"),1)]),e(b,{class:"my-3"}),l[32]||(l[32]=c("h4",{class:"text-subtitle-1 font-weight-bold mb-2"},"Resumen",-1)),c("p",null,[l[29]||(l[29]=i(" Se crearán indicadores de tipo ")),c("strong",null,_(t.value.tipo),1),l[30]||(l[30]=i(" con valores ")),c("strong",null,_(t.value.tipo_valor),1)])]),_:1,__:[31,32]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{value:3},{default:o(()=>[e(U,{flat:""},{default:o(()=>[e(J,null,{default:o(()=>[e(C,{label:"Redacción del indicador",modelValue:t.value.redaccion,"onUpdate:modelValue":l[4]||(l[4]=m=>t.value.redaccion=m),required:"",variant:"outlined"},null,8,["modelValue"]),e(C,{label:"Fuente de verificación",modelValue:t.value.fuente_verificacion,"onUpdate:modelValue":l[5]||(l[5]=m=>t.value.fuente_verificacion=m),variant:"outlined"},null,8,["modelValue"]),e(C,{label:"Población objetivo",modelValue:t.value.target_poblacion,"onUpdate:modelValue":l[6]||(l[6]=m=>t.value.target_poblacion=m),variant:"outlined"},null,8,["modelValue"]),e(C,{label:"Línea base",modelValue:t.value.baseline,"onUpdate:modelValue":l[7]||(l[7]=m=>t.value.baseline=m),variant:"outlined"},null,8,["modelValue"]),t.value.tipo_valor!==V(g).TIPOS_VALOR.LITERAL?(v(),j(X,{key:0},{default:o(()=>[e(A,{cols:"6"},{default:o(()=>[e(C,{label:"Meta Q1",modelValue:t.value.target_q1,"onUpdate:modelValue":l[8]||(l[8]=m=>t.value.target_q1=m),type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(A,{cols:"6"},{default:o(()=>[e(C,{label:"Meta Q2",modelValue:t.value.target_q2,"onUpdate:modelValue":l[9]||(l[9]=m=>t.value.target_q2=m),type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(A,{cols:"6"},{default:o(()=>[e(C,{label:"Meta Q3",modelValue:t.value.target_q3,"onUpdate:modelValue":l[10]||(l[10]=m=>t.value.target_q3=m),type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(A,{cols:"6"},{default:o(()=>[e(C,{label:"Meta Q4",modelValue:t.value.target_q4,"onUpdate:modelValue":l[11]||(l[11]=m=>t.value.target_q4=m),type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})):$("",!0)]),_:1})]),_:1})]),_:1}),e(f,{value:4},{default:o(()=>[e(U,{flat:""},{default:o(()=>[e(J,null,{default:o(()=>[e(U,{variant:"outlined",class:"mb-4"},{default:o(()=>[e(y,{class:"text-h5"},{default:o(()=>l[33]||(l[33]=[i("Resumen del Indicador")])),_:1,__:[33]}),e(P,null,{default:o(()=>l[34]||(l[34]=[i("Revise cuidadosamente la información antes de enviar")])),_:1,__:[34]}),e(b,{class:"my-2"}),e(J,null,{default:o(()=>[t.value.tipoRelacion?(v(),k("div",qe,[l[37]||(l[37]=c("h4",{class:"text-subtitle-1 font-weight-bold"},"Relación del Indicador",-1)),e(b,{class:"my-2"}),c("p",null,[l[35]||(l[35]=c("strong",null,"Tipo:",-1)),i(" "+_(t.value.tipoRelacion==="objetivoEspecifico"?"Objetivo Específico":t.value.tipoRelacion==="resultado"?"Resultado":t.value.tipoRelacion==="producto"?"Producto":"Objetivo General"),1)]),t.value[t.value.tipoRelacion]?(v(),k("p",ze,[l[36]||(l[36]=c("strong",null,"Elemento relacionado:",-1)),i(" "+_(t.value[t.value.tipoRelacion].codigo)+" - "+_(t.value[t.value.tipoRelacion].descripcion),1)])):$("",!0)])):$("",!0),c("div",Me,[l[40]||(l[40]=c("h4",{class:"text-subtitle-1 font-weight-bold"},"Configuración del Indicador",-1)),e(b,{class:"my-2"}),c("p",null,[l[38]||(l[38]=c("strong",null,"Tipo de valor:",-1)),i(" "+_(t.value.tipo_valor),1)]),c("p",null,[l[39]||(l[39]=c("strong",null,"Formato:",-1)),i(" "+_(t.value.tipo),1)])]),t.value.redaccion?(v(),k("div",Fe,[l[49]||(l[49]=c("h4",{class:"text-subtitle-1 font-weight-bold"},"Datos del Indicador",-1)),e(b,{class:"my-2"}),c("p",null,[l[41]||(l[41]=c("strong",null,"Redacción:",-1)),i(" "+_(t.value.redaccion),1)]),t.value.fuente_verificacion?(v(),k("p",Qe,[l[42]||(l[42]=c("strong",null,"Fuente de verificación:",-1)),i(" "+_(t.value.fuente_verificacion),1)])):$("",!0),t.value.target_poblacion?(v(),k("p",Be,[l[43]||(l[43]=c("strong",null,"Población objetivo:",-1)),i(" "+_(t.value.target_poblacion),1)])):$("",!0),t.value.baseline?(v(),k("p",He,[l[44]||(l[44]=c("strong",null,"Línea base:",-1)),i(" "+_(t.value.baseline),1)])):$("",!0),t.value.tipo_valor!==V(g).TIPOS_VALOR.LITERAL?(v(),k(Q,{key:3},[t.value.target_q1?(v(),k("p",Je,[l[45]||(l[45]=c("strong",null,"Meta Q1:",-1)),i(" "+_(t.value.target_q1),1)])):$("",!0),t.value.target_q2?(v(),k("p",Ke,[l[46]||(l[46]=c("strong",null,"Meta Q2:",-1)),i(" "+_(t.value.target_q2),1)])):$("",!0),t.value.target_q3?(v(),k("p",We,[l[47]||(l[47]=c("strong",null,"Meta Q3:",-1)),i(" "+_(t.value.target_q3),1)])):$("",!0),t.value.target_q4?(v(),k("p",Xe,[l[48]||(l[48]=c("strong",null,"Meta Q4:",-1)),i(" "+_(t.value.target_q4),1)])):$("",!0)],64)):$("",!0)])):$("",!0),e(s,{type:"info",variant:"tonal",class:"mt-4"},{default:o(()=>l[50]||(l[50]=[i(" Verifique que toda la información sea correcta antes de enviar. Esta acción no se puede deshacer. ")])),_:1,__:[50]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{class:"mt-4"},{default:o(()=>[e(M,{onClick:l[13]||(l[13]=m=>p.value--),disabled:p.value===1,variant:"outlined"},{default:o(()=>l[51]||(l[51]=[i("Atras")])),_:1,__:[51]},8,["disabled"]),e(u),p.value<4?(v(),j(M,{key:0,onClick:l[14]||(l[14]=m=>p.value++),variant:"outlined",color:"primary"},{default:o(()=>l[52]||(l[52]=[i("Siguiente")])),_:1,__:[52]})):(v(),j(M,{key:1,onClick:I,variant:"elevated",color:"success"},{default:o(()=>l[53]||(l[53]=[i("ENVIAR")])),_:1,__:[53]}))]),_:1})]),_:1})}}},Ze={class:"d-flex justify-space-between align-center mb-4"},he={class:"d-flex justify-space-between align-center mb-4"},eo={class:"d-flex justify-space-between align-center mb-4"},oo={class:"d-flex justify-space-between align-center mb-4"},to={__name:"NewIndicadoresTab",setup(w){const r=se(),g=N(!1),E=N("general"),p=N(""),R=N(null),t=N(null),d=Z(()=>r.nuevoProyecto.objetivoGeneral[0]),I=Z(()=>r.nuevoProyecto.objetivoEspecifico),O=Z(()=>r.nuevoProyecto.resultados),l=Z(()=>r.nuevoProyecto.productos),y=Z(()=>r.nuevoProyecto.indicadores.objetivoGeneral),x=Z(()=>r.nuevoProyecto.indicadores.objetivoEspecifico),H=Z(()=>r.nuevoProyecto.indicadores.resultado),S=Z(()=>r.nuevoProyecto.indicadores.producto),B=Z(()=>{switch(p.value){case"objetivoGeneral":return d.value;case"objetivoEspecifico":return I.value;case"resultado":return O.value;case"producto":return l.value;default:return[]}}),T=(P,s=null,D=null)=>{if(p.value=P,t.value=D,s!==null)if(P==="objetivoGeneral")R.value=r.nuevoProyecto.indicadores.objetivoGeneral[s];else{const G=A(P,D);R.value=G[s]}else R.value=null;g.value=!0},A=(P,s)=>{const D=B.value[s];return r.nuevoProyecto.indicadores[P].filter(G=>G.componente_id===D.codigo)},b=()=>{g.value=!1,p.value="",R.value=null,t.value=null},U=P=>{const s=P.tipoRelacion,D=P[s],G={...P,componente_id:D.codigo};if(R.value)r.vincularIndicador(s,G);else{switch(P.tipo_valor){case r.TIPOS_VALOR.LITERAL:r.addIndicadorLiteral(s);break;case r.TIPOS_VALOR.NUMERICO:r.addIndicadorNumerico(s);break;case r.TIPOS_VALOR.PORCENTUAL:r.addIndicadorPorcentual(s);break}const M=r.nuevoProyecto.indicadores[s].length-1;r.vincularIndicador(s,M,D.codigo)}b()},X=(P,s,D=null)=>{if(confirm("¿Está seguro de eliminar este indicador?"))if(D!==null){const M=A(P,D)[s].codigo,u=r.nuevoProyecto.indicadores[P].findIndex(n=>n.codigo===M);u!==-1&&r.nuevoProyecto.indicadores[P].splice(u,1)}else r.nuevoProyecto.indicadores[P].splice(s,1)},J=P=>{const s=I.value[P].codigo;return x.value.filter(D=>D.componente_id===s)},f=P=>{const s=O.value[P].codigo;return H.value.filter(D=>D.componente_id===s)},C=P=>{const s=l.value[P].codigo;return S.value.filter(D=>D.componente_id===s)};return(P,s)=>{const D=a("v-card-title"),G=a("v-icon"),M=a("v-tab"),u=a("v-tabs"),n=a("v-btn"),m=a("v-expansion-panel-title"),q=a("v-list-subheader"),W=a("v-list-item-title"),ee=a("v-list-item-subtitle"),re=a("v-list-item"),te=a("v-list"),le=a("v-expansion-panel-text"),ue=a("v-expansion-panel"),de=a("v-expansion-panels"),oe=a("v-card-text"),ne=a("v-card"),ae=a("v-window-item"),pe=a("v-window"),ye=a("v-dialog");return v(),j(ne,null,{default:o(()=>[e(D,{class:"text-h5"},{default:o(()=>s[7]||(s[7]=[i("Gestión de Indicadores")])),_:1,__:[7]}),e(oe,null,{default:o(()=>[e(u,{modelValue:E.value,"onUpdate:modelValue":s[0]||(s[0]=F=>E.value=F),grow:""},{default:o(()=>[e(M,{value:"general"},{default:o(()=>[e(G,{left:""},{default:o(()=>s[8]||(s[8]=[i("mdi-target")])),_:1,__:[8]}),s[9]||(s[9]=i(" Objetivo General "))]),_:1,__:[9]}),e(M,{value:"especificos"},{default:o(()=>[e(G,{left:""},{default:o(()=>s[10]||(s[10]=[i("mdi-bullseye-arrow")])),_:1,__:[10]}),s[11]||(s[11]=i(" Objetivos Específicos "))]),_:1,__:[11]}),e(M,{value:"resultados"},{default:o(()=>[e(G,{left:""},{default:o(()=>s[12]||(s[12]=[i("mdi-checkbox-marked-circle-outline")])),_:1,__:[12]}),s[13]||(s[13]=i(" Resultados "))]),_:1,__:[13]}),e(M,{value:"productos"},{default:o(()=>[e(G,{left:""},{default:o(()=>s[14]||(s[14]=[i("mdi-package-variant")])),_:1,__:[14]}),s[15]||(s[15]=i(" Productos "))]),_:1,__:[15]})]),_:1},8,["modelValue"]),e(pe,{modelValue:E.value,"onUpdate:modelValue":s[5]||(s[5]=F=>E.value=F)},{default:o(()=>[e(ae,{value:"general"},{default:o(()=>[e(ne,{flat:""},{default:o(()=>[e(oe,null,{default:o(()=>[c("div",Ze,[s[17]||(s[17]=c("h3",{class:"text-h6"},"Indicadores para Objetivo General",-1)),e(n,{color:"primary","prepend-icon":"mdi-plus",onClick:s[1]||(s[1]=F=>T("objetivoGeneral",P.index))},{default:o(()=>s[16]||(s[16]=[i(" Agregar al Objetivo General ")])),_:1,__:[16]})]),e(de,null,{default:o(()=>[e(ue,null,{default:o(()=>[e(m,null,{default:o(()=>[i(_(d.value.codigo)+" - "+_(d.value.descripcion),1)]),_:1}),e(le,null,{default:o(()=>[y.value.length>0?(v(),j(te,{key:0,class:"mt-4"},{default:o(()=>[e(q,null,{default:o(()=>s[18]||(s[18]=[i("Indicadores registrados")])),_:1,__:[18]}),(v(!0),k(Q,null,K(y.value,(F,z)=>(v(),j(re,{key:"gen-"+z},{prepend:o(()=>[e(G,null,{default:o(()=>s[19]||(s[19]=[i("mdi-chart-line")])),_:1,__:[19]})]),append:o(()=>[e(n,{icon:"",variant:"text",color:"primary",onClick:Y=>T("objetivoGeneral",z),class:"mr-2"},{default:o(()=>[e(G,null,{default:o(()=>s[20]||(s[20]=[i("mdi-pencil")])),_:1,__:[20]})]),_:2},1032,["onClick"]),e(n,{icon:"",variant:"text",color:"error",onClick:Y=>X("objetivoGeneral",z)},{default:o(()=>[e(G,null,{default:o(()=>s[21]||(s[21]=[i("mdi-delete")])),_:1,__:[21]})]),_:2},1032,["onClick"])]),default:o(()=>[e(W,null,{default:o(()=>[i(_(F.codigo)+" - "+_(F.redaccion),1)]),_:2},1024),e(ee,null,{default:o(()=>[i(" Tipo: "+_(F.tipo)+" | Valor: "+_(F.tipo_valor),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):$("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(ae,{value:"especificos"},{default:o(()=>[e(ne,{flat:""},{default:o(()=>[e(oe,null,{default:o(()=>[c("div",he,[s[23]||(s[23]=c("h3",{class:"text-h6"},"Indicadores para Objetivos Específicos",-1)),e(n,{color:"primary","prepend-icon":"mdi-plus",onClick:s[2]||(s[2]=F=>T("objetivoEspecifico"))},{default:o(()=>s[22]||(s[22]=[i(" Agregar a Objetivo Específico ")])),_:1,__:[22]})]),e(de,null,{default:o(()=>[(v(!0),k(Q,null,K(I.value,(F,z)=>(v(),j(ue,{key:"oe-"+z},{default:o(()=>[e(m,null,{default:o(()=>[i(_(F.codigo)+" - "+_(F.descripcion),1)]),_:2},1024),e(le,null,{default:o(()=>[J(z).length>0?(v(),j(te,{key:0,class:"mt-4"},{default:o(()=>[e(q,null,{default:o(()=>s[24]||(s[24]=[i("Indicadores registrados")])),_:1,__:[24]}),(v(!0),k(Q,null,K(J(z),(Y,h)=>(v(),j(re,{key:"esp-"+z+"-"+h},{prepend:o(()=>[e(G,null,{default:o(()=>s[25]||(s[25]=[i("mdi-chart-line")])),_:1,__:[25]})]),append:o(()=>[e(n,{icon:"",variant:"text",color:"primary",onClick:ie=>T("objetivoEspecifico",h,z),class:"mr-2"},{default:o(()=>[e(G,null,{default:o(()=>s[26]||(s[26]=[i("mdi-pencil")])),_:1,__:[26]})]),_:2},1032,["onClick"]),e(n,{icon:"",variant:"text",color:"error",onClick:ie=>X("objetivoEspecifico",h,z)},{default:o(()=>[e(G,null,{default:o(()=>s[27]||(s[27]=[i("mdi-delete")])),_:1,__:[27]})]),_:2},1032,["onClick"])]),default:o(()=>[e(W,null,{default:o(()=>[i(_(Y.codigo)+" - "+_(Y.redaccion),1)]),_:2},1024),e(ee,null,{default:o(()=>[i(" Tipo: "+_(Y.tipo)+" | Valor: "+_(Y.tipo_valor),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)):$("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(ae,{value:"resultados"},{default:o(()=>[e(ne,{flat:""},{default:o(()=>[e(oe,null,{default:o(()=>[c("div",eo,[s[29]||(s[29]=c("h3",{class:"text-h6"},"Indicadores para Resultados",-1)),e(n,{color:"primary","prepend-icon":"mdi-plus",onClick:s[3]||(s[3]=F=>T("resultado"))},{default:o(()=>s[28]||(s[28]=[i(" Agregar a Resultado ")])),_:1,__:[28]})]),e(de,null,{default:o(()=>[(v(!0),k(Q,null,K(O.value,(F,z)=>(v(),j(ue,{key:"res-"+z},{default:o(()=>[e(m,null,{default:o(()=>[i(_(F.codigo)+" - "+_(F.descripcion),1)]),_:2},1024),e(le,null,{default:o(()=>[f(z).length>0?(v(),j(te,{key:0,class:"mt-4"},{default:o(()=>[e(q,null,{default:o(()=>s[30]||(s[30]=[i("Indicadores registrados")])),_:1,__:[30]}),(v(!0),k(Q,null,K(f(z),(Y,h)=>(v(),j(re,{key:"res-"+z+"-"+h},{prepend:o(()=>[e(G,null,{default:o(()=>s[31]||(s[31]=[i("mdi-chart-line")])),_:1,__:[31]})]),append:o(()=>[e(n,{icon:"",variant:"text",color:"primary",onClick:ie=>T("resultado",h,z),class:"mr-2"},{default:o(()=>[e(G,null,{default:o(()=>s[32]||(s[32]=[i("mdi-pencil")])),_:1,__:[32]})]),_:2},1032,["onClick"]),e(n,{icon:"",variant:"text",color:"error",onClick:ie=>X("resultado",h,z)},{default:o(()=>[e(G,null,{default:o(()=>s[33]||(s[33]=[i("mdi-delete")])),_:1,__:[33]})]),_:2},1032,["onClick"])]),default:o(()=>[e(W,null,{default:o(()=>[i(_(Y.codigo)+" - "+_(Y.redaccion),1)]),_:2},1024),e(ee,null,{default:o(()=>[i(" Tipo: "+_(Y.tipo)+" | Valor: "+_(Y.tipo_valor),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)):$("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(ae,{value:"productos"},{default:o(()=>[e(ne,{flat:""},{default:o(()=>[e(oe,null,{default:o(()=>[c("div",oo,[s[35]||(s[35]=c("h3",{class:"text-h6"},"Indicadores para Productos",-1)),e(n,{color:"primary","prepend-icon":"mdi-plus",onClick:s[4]||(s[4]=F=>T("producto"))},{default:o(()=>s[34]||(s[34]=[i(" Agregar a Producto ")])),_:1,__:[34]})]),e(de,null,{default:o(()=>[(v(!0),k(Q,null,K(l.value,(F,z)=>(v(),j(ue,{key:"prod-"+z},{default:o(()=>[e(m,null,{default:o(()=>[i(_(F.codigo)+" - "+_(F.descripcion),1)]),_:2},1024),e(le,null,{default:o(()=>[C(z).length>0?(v(),j(te,{key:0,class:"mt-4"},{default:o(()=>[e(q,null,{default:o(()=>s[36]||(s[36]=[i("Indicadores registrados")])),_:1,__:[36]}),(v(!0),k(Q,null,K(C(z),(Y,h)=>(v(),j(re,{key:"prod-"+z+"-"+h},{prepend:o(()=>[e(G,null,{default:o(()=>s[37]||(s[37]=[i("mdi-chart-line")])),_:1,__:[37]})]),append:o(()=>[e(n,{icon:"",variant:"text",color:"primary",onClick:ie=>T("producto",h,z),class:"mr-2"},{default:o(()=>[e(G,null,{default:o(()=>s[38]||(s[38]=[i("mdi-pencil")])),_:1,__:[38]})]),_:2},1032,["onClick"]),e(n,{icon:"",variant:"text",color:"error",onClick:ie=>X("producto",h,z)},{default:o(()=>[e(G,null,{default:o(()=>s[39]||(s[39]=[i("mdi-delete")])),_:1,__:[39]})]),_:2},1032,["onClick"])]),default:o(()=>[e(W,null,{default:o(()=>[i(_(Y.codigo)+" - "+_(Y.redaccion),1)]),_:2},1024),e(ee,null,{default:o(()=>[i(" Tipo: "+_(Y.tipo)+" | Valor: "+_(Y.tipo_valor),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)):$("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(ye,{modelValue:g.value,"onUpdate:modelValue":s[6]||(s[6]=F=>g.value=F),"max-width":"800",persistent:""},{default:o(()=>[e(ne,null,{default:o(()=>[e(D,{class:"d-flex justify-space-between align-center"},{default:o(()=>[c("span",null,_(R.value?"Editar":"Nuevo")+" Indicador",1),e(n,{icon:"",onClick:b},{default:o(()=>[e(G,null,{default:o(()=>s[40]||(s[40]=[i("mdi-close")])),_:1,__:[40]})]),_:1})]),_:1}),e(oe,null,{default:o(()=>[g.value?(v(),j(Ye,{key:0,"tipo-relacion":p.value,"indicador-editando":R.value,"componente-padre-index":t.value,onSubmit:U,onCancel:b},null,8,["tipo-relacion","indicador-editando","componente-padre-index"])):$("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},lo={key:0,class:"mb-2"},no={key:0},me={__name:"ActividadForm",props:{actividad:Object,elementosVinculacion:Array},emits:["eliminar"],setup(w,{emit:r}){const g=["Actividades de Capacitación (ACAP)","Proyectos de Investigación (PINV)","Actividades Operativas (AOP)","Campañas de Sensibilización (CSEN)","Proyectos de Desarrollo (DES)","Actividades de Incidencia (INC)","Actividades de Articulación (ACART)"],E=[{codigo:"PEI1",descripcion:"Reducir pobreza urbana"},{codigo:"PEI2",descripcion:"Incrementar cobertura educativa"}],p=[{codigo:"IND1",descripcion:"Porcentaje de cobertura escolar"},{codigo:"IND2",descripcion:"Número de familias asistidas"}];return(R,t)=>{const d=a("v-text-field"),I=a("v-col"),O=a("v-divider"),l=a("v-select"),y=a("v-chip"),x=a("v-checkbox"),H=a("v-expand-transition"),S=a("v-row"),B=a("v-icon"),T=a("v-btn"),A=a("v-card");return v(),j(A,{class:"pa-4 mb-4",elevation:"2"},{default:o(()=>[e(S,{dense:""},{default:o(()=>[e(I,{cols:"12",sm:"4"},{default:o(()=>[e(d,{modelValue:w.actividad.codigo,"onUpdate:modelValue":t[0]||(t[0]=b=>w.actividad.codigo=b),label:"Código",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",sm:"8"},{default:o(()=>[e(d,{modelValue:w.actividad.descripcion,"onUpdate:modelValue":t[1]||(t[1]=b=>w.actividad.descripcion=b),label:"Descripción",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),e(I,{cols:"12"},{default:o(()=>[e(O,{class:"my-4"})]),_:1}),e(I,{cols:"12",sm:"6"},{default:o(()=>[e(l,{modelValue:w.actividad.tipo,"onUpdate:modelValue":t[2]||(t[2]=b=>w.actividad.tipo=b),items:g,label:"Tipo de Actividad",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",sm:"6",class:"d-flex align-center"},{default:o(()=>[t[10]||(t[10]=c("span",{class:"mr-2"},"Estado:",-1)),e(y,{color:"info","text-color":"white",label:"",small:""},{default:o(()=>t[9]||(t[9]=[i(" Estructuración ")])),_:1,__:[9]})]),_:1,__:[10]}),e(I,{cols:"12",sm:"6"},{default:o(()=>[e(l,{modelValue:w.actividad.vinculacion,"onUpdate:modelValue":t[3]||(t[3]=b=>w.actividad.vinculacion=b),items:w.elementosVinculacion,label:"Elemento Vinculado","item-text":"descripcion","item-value":"codigo",dense:"",outlined:""},null,8,["modelValue","items"])]),_:1}),e(I,{cols:"12"},{default:o(()=>[e(S,null,{default:o(()=>[e(I,{cols:"12",sm:"6"},{default:o(()=>[e(x,{modelValue:w.actividad.relacionConPEI.objetivo,"onUpdate:modelValue":t[4]||(t[4]=b=>w.actividad.relacionConPEI.objetivo=b),label:"Relacionada con un objetivo PEI",dense:""},null,8,["modelValue"]),e(x,{modelValue:w.actividad.relacionConPEI.indicador,"onUpdate:modelValue":t[5]||(t[5]=b=>w.actividad.relacionConPEI.indicador=b),label:"Relacionada con un indicador PEI",dense:""},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",sm:"6"},{default:o(()=>[e(H,null,{default:o(()=>[w.actividad.relacionConPEI.objetivo?(v(),k("div",lo,[e(l,{modelValue:w.actividad.relacionConPEI.objetivoSeleccionado,"onUpdate:modelValue":t[6]||(t[6]=b=>w.actividad.relacionConPEI.objetivoSeleccionado=b),items:E,label:"Objetivo PEI","item-text":"descripcion","item-value":"codigo",dense:"",outlined:""},null,8,["modelValue"])])):$("",!0)]),_:1}),e(H,null,{default:o(()=>[w.actividad.relacionConPEI.indicador?(v(),k("div",no,[e(l,{modelValue:w.actividad.relacionConPEI.indicadorSeleccionado,"onUpdate:modelValue":t[7]||(t[7]=b=>w.actividad.relacionConPEI.indicadorSeleccionado=b),items:p,label:"Indicador PEI","item-text":"descripcion","item-value":"codigo",dense:"",outlined:""},null,8,["modelValue"])])):$("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(I,{cols:"12",class:"text-right"},{default:o(()=>[e(T,{icon:"",color:"error",onClick:t[8]||(t[8]=b=>R.$emit("eliminar"))},{default:o(()=>[e(B,null,{default:o(()=>t[11]||(t[11]=[i("mdi-delete")])),_:1,__:[11]})]),_:1})]),_:1})]),_:1})]),_:1})}}},ao={__name:"NewActividadTab",setup(w){const r=N(0),g=["Objetivo General","Objetivos Específicos","Resultados","Productos"],E=_e("nuevoProyecto").objetivoGeneral,p=_e("objetivosEspecificos"),R=_e("resultados"),t=_e("productos"),d=fe({objetivoGeneral:[],objetivosEspecificos:[],resultados:[],productos:[]});function I(l){d[l].push({codigo:"",descripcion:"",tipo:"",estado:"EST",vinculacion:"",relacionConPEI:{objetivo:!1,indicador:!1,objetivoSeleccionado:"",indicadorSeleccionado:""}})}function O(l,y){d[l].splice(y,1)}return(l,y)=>{const x=a("v-tab"),H=a("v-tabs"),S=a("v-btn"),B=a("v-container"),T=a("v-tab-item"),A=a("v-tabs-items");return v(),k(Q,null,[e(H,{modelValue:r.value,"onUpdate:modelValue":y[0]||(y[0]=b=>r.value=b),"background-color":"primary",dark:"",grow:""},{default:o(()=>[(v(),k(Q,null,K(g,(b,U)=>e(x,{key:U},{default:o(()=>[i(_(b),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),e(A,{modelValue:r.value,"onUpdate:modelValue":y[5]||(y[5]=b=>r.value=b)},{default:o(()=>[e(T,null,{default:o(()=>[r.value===0?(v(),j(B,{key:0},{default:o(()=>[e(S,{color:"primary",class:"mb-4",onClick:y[1]||(y[1]=b=>I("objetivoGeneral"))},{default:o(()=>y[6]||(y[6]=[i(" Agregar Actividad del Objetivo General ")])),_:1,__:[6]}),(v(!0),k(Q,null,K(d.objetivoGeneral,(b,U)=>(v(),j(me,{key:"objetivoGeneral-"+U,actividad:b,"elementos-vinculacion":V(E),onEliminar:()=>O("objetivoGeneral",U)},null,8,["actividad","elementos-vinculacion","onEliminar"]))),128))]),_:1})):$("",!0)]),_:1}),e(T,null,{default:o(()=>[r.value===1?(v(),j(B,{key:0},{default:o(()=>[e(S,{color:"primary",class:"mb-4",onClick:y[2]||(y[2]=b=>I("objetivosEspecificos"))},{default:o(()=>y[7]||(y[7]=[i(" Agregar Actividad de Objetivo Específico ")])),_:1,__:[7]}),(v(!0),k(Q,null,K(d.objetivosEspecificos,(b,U)=>(v(),j(me,{key:"objetivosEspecificos-"+U,actividad:b,"elementos-vinculacion":V(p),onEliminar:()=>O("objetivosEspecificos",U)},null,8,["actividad","elementos-vinculacion","onEliminar"]))),128))]),_:1})):$("",!0)]),_:1}),e(T,null,{default:o(()=>[r.value===2?(v(),j(B,{key:0},{default:o(()=>[e(S,{color:"primary",class:"mb-4",onClick:y[3]||(y[3]=b=>I("resultados"))},{default:o(()=>y[8]||(y[8]=[i(" Agregar Actividad de Resultado ")])),_:1,__:[8]}),(v(!0),k(Q,null,K(d.resultados,(b,U)=>(v(),j(me,{key:"resultados-"+U,actividad:b,"elementos-vinculacion":V(R),onEliminar:()=>O("resultados",U)},null,8,["actividad","elementos-vinculacion","onEliminar"]))),128))]),_:1})):$("",!0)]),_:1}),e(T,null,{default:o(()=>[r.value===3?(v(),j(B,{key:0},{default:o(()=>[e(S,{color:"primary",class:"mb-4",onClick:y[4]||(y[4]=b=>I("productos"))},{default:o(()=>y[9]||(y[9]=[i(" Agregar Actividad de Producto ")])),_:1,__:[9]}),(v(!0),k(Q,null,K(d.productos,(b,U)=>(v(),j(me,{key:"productos-"+U,actividad:b,"elementos-vinculacion":V(t),onEliminar:()=>O("productos",U)},null,8,["actividad","elementos-vinculacion","onEliminar"]))),128))]),_:1})):$("",!0)]),_:1})]),_:1},8,["modelValue"])],64)}}},be={obtenerTodo:async()=>{try{return(await ce.get("/lineas_accion")).data}catch(w){console.error("Axios: No se pudo obtener la lista de Lineas de Accion",w)}},obtenerPorId:async w=>{try{return(await ce.get("/lineas_accion/"+w)).data}catch(r){console.error("Axios: No se pudo obtener la Linea de Accion con ID: "+w,r)}},crear:async w=>{try{return(await ce.post("/lineas_accion/",w)).data}catch(r){throw console.error("Axios: Error al crear nueva linea de accion",r),r}},actualizar:async(w,r)=>{try{return(await ce.put("/lineas_accion/"+w+"/",r)).data}catch(g){throw console.error("Axios: Error al actualizar Línea de Acción con ID: "+w,g),g}},eliminar:async w=>{try{return(await ce.delete("/lineas_accion/"+w)).data}catch(r){throw console.error("Axios: Error al eliminar Línea de Acción con ID: "+w,r),r}}},io=Ve("linea-accion",()=>{const w=N([]),r=N(null),g=N(!1),E=N(null);return{lineasDeAccion:w,lineaDeAccionActual:r,cargando:g,error:E,obtenerLineasDeAccion:async()=>{g.value=!0,E.value=null;try{w.value=await be.obtenerTodo()}catch(t){E.value=t}finally{g.value=!1}},lineaDeAccionPorId:async t=>{try{r.value=await be.obtenerPorId(t)}catch(d){E.value=d}finally{g.value=!1}}}}),so={class:"text-caption text-grey"},ro={__name:"LineaAccionListaAdd",setup(w){const r=N(!1),g=N(!1),E=N(!1),p=N(!1),R=N(null),t=N(null),d=N(""),I=N(1),O=N(5),l=[5,10,20,50,100],y=fe({visible:!1,text:"",color:"success",timeout:3e3}),x=(u,n="success")=>{y.text=u,y.color=n==="error"?"error":"success",y.visible=!0},H=io(),{lineasDeAccion:S}=Ie(H),{obtenerLineasDeAccion:B}=H,T=Z(()=>{if(!d.value)return S.value;const u=d.value.toLowerCase();return S.value.filter(n=>n.codigo.toLowerCase().includes(u)||n.titulo.toLowerCase().includes(u)||n.descripcion&&n.descripcion.toLowerCase().includes(u))}),A=Z(()=>{const u=(I.value-1)*O.value,n=u+O.value;return T.value.slice(u,n)}),b=Z(()=>Math.ceil(T.value.length/O.value)),U=Z(()=>(I.value-1)*O.value+1),X=Z(()=>{const u=I.value*O.value;return u>T.value.length?T.value.length:u});Pe([d,O],()=>{I.value=1}),we(async()=>{await J()});const J=async()=>{try{await Promise.all([B()])}catch(u){console.error("Error al cargar la informacion de los stores",u)}},f=fe({id:null,codigo:"",titulo:"",descripcion:""}),C=(u=null)=>{u?(E.value=!0,Object.assign(f,{id:u.id,codigo:u.codigo,titulo:u.titulo,descripcion:u.descripcion})):(E.value=!1,s()),r.value=!0},P=()=>{r.value=!1,s()},s=()=>{var u;Object.assign(f,{id:null,codigo:"",titulo:"",descripcion:""}),(u=R.value)==null||u.resetValidation()},D=async()=>{var n,m,q;const{valid:u}=await R.value.validate();if(u){p.value=!0;try{E.value?(await be.actualizar(f.id,f),x("Línea actualizada correctamente")):(await be.crear(f),x("Línea creada correctamente")),await H.obtenerLineasDeAccion(),P()}catch(W){console.error("Error:",((n=W.response)==null?void 0:n.data)||W.message),x(((q=(m=W.response)==null?void 0:m.data)==null?void 0:q.message)||"Error al guardar la línea","error")}finally{p.value=!1}}},G=u=>{t.value=u,g.value=!0},M=()=>{S.value=S.value.filter(u=>u.id!==t.value),g.value=!1,t.value=null};return(u,n)=>{const m=a("v-btn"),q=a("v-snackbar"),W=a("v-col"),ee=a("v-icon"),re=a("v-tooltip"),te=a("v-row"),le=a("v-text-field"),ue=a("v-select"),de=a("v-pagination"),oe=a("v-list-item"),ne=a("v-list"),ae=a("v-card"),pe=a("v-card-title"),ye=a("v-textarea"),F=a("v-form"),z=a("v-card-text"),Y=a("v-spacer"),h=a("v-card-actions"),ie=a("v-dialog");return v(),k("div",null,[e(q,{modelValue:y.visible,"onUpdate:modelValue":n[1]||(n[1]=L=>y.visible=L),timeout:y.timeout,color:y.color,location:"top right"},{actions:o(()=>[e(m,{variant:"text",onClick:n[0]||(n[0]=L=>y.visible=!1)},{default:o(()=>n[13]||(n[13]=[i(" Cerrar ")])),_:1,__:[13]})]),default:o(()=>[i(_(y.text)+" ",1)]),_:1},8,["modelValue","timeout","color"]),e(te,{class:"mb-4",align:"center"},{default:o(()=>[e(W,{cols:"12",sm:"6"},{default:o(()=>n[14]||(n[14]=[c("h3",{class:"text-h5"},"Líneas de Acción Disponibles",-1),c("p",{class:"text-caption text-grey"},"Crear Lineas de Accion",-1)])),_:1,__:[14]}),e(W,{cols:"12",sm:"6",class:"text-sm-right"},{default:o(()=>[e(m,{icon:"",onClick:n[2]||(n[2]=L=>C()),color:"primary",size:"small"},{default:o(()=>[e(ee,null,{default:o(()=>n[15]||(n[15]=[i("mdi-plus")])),_:1,__:[15]}),e(re,{activator:"parent",location:"top"},{default:o(()=>n[16]||(n[16]=[i("Nueva Linea")])),_:1,__:[16]})]),_:1})]),_:1})]),_:1}),e(le,{modelValue:d.value,"onUpdate:modelValue":n[3]||(n[3]=L=>d.value=L),label:"Buscar líneas de acción","prepend-inner-icon":"mdi-magnify",variant:"outlined",clearable:"",class:"mb-4"},null,8,["modelValue"]),e(te,{class:"mb-2",align:"center"},{default:o(()=>[e(W,{cols:"12",sm:"6"},{default:o(()=>[e(ue,{modelValue:O.value,"onUpdate:modelValue":n[4]||(n[4]=L=>O.value=L),items:l,label:"Items por página",density:"compact",variant:"outlined",style:{"max-width":"150px"}},null,8,["modelValue"])]),_:1}),e(W,{cols:"12",sm:"6",class:"text-sm-right"},{default:o(()=>[b.value>1?(v(),j(de,{key:0,modelValue:I.value,"onUpdate:modelValue":n[5]||(n[5]=L=>I.value=L),length:b.value,"total-visible":7},null,8,["modelValue","length"])):$("",!0)]),_:1})]),_:1}),e(ae,{class:"mb-6"},{default:o(()=>[e(ne,{lines:"two"},{default:o(()=>[T.value.length>0?(v(!0),k(Q,{key:0},K(A.value,L=>(v(),j(oe,{key:L.id,title:L.codigo+" - "+L.titulo,subtitle:L.descripcion||"Sin descripción"},{append:o(()=>[e(m,{icon:"",variant:"text",color:"blue",onClick:Ee=>C(L)},{default:o(()=>[e(ee,null,{default:o(()=>n[17]||(n[17]=[i("mdi-pencil")])),_:1,__:[17]})]),_:2},1032,["onClick"]),e(m,{icon:"",variant:"text",color:"red",onClick:Ee=>G(L.id)},{default:o(()=>[e(ee,null,{default:o(()=>n[18]||(n[18]=[i("mdi-delete")])),_:1,__:[18]})]),_:2},1032,["onClick"])]),_:2},1032,["title","subtitle"]))),128)):(v(),j(oe,{key:1,title:"No hay líneas de acción registradas",class:"text-grey"}))]),_:1}),e(te,{class:"mt-4",align:"center",justify:"space-between"},{default:o(()=>[e(W,{cols:"12",sm:"6"},{default:o(()=>[c("div",so," Mostrando "+_(U.value)+"-"+_(X.value)+" de "+_(T.value.length)+" items ",1)]),_:1}),e(W,{cols:"12",sm:"6",class:"text-sm-right"},{default:o(()=>[b.value>1?(v(),j(de,{key:0,modelValue:I.value,"onUpdate:modelValue":n[6]||(n[6]=L=>I.value=L),length:b.value,"total-visible":7},null,8,["modelValue","length"])):$("",!0)]),_:1})]),_:1})]),_:1}),e(ie,{modelValue:r.value,"onUpdate:modelValue":n[10]||(n[10]=L=>r.value=L),"max-width":"600",persistent:""},{default:o(()=>[e(ae,null,{default:o(()=>[e(pe,{class:"text-h5"},{default:o(()=>[i(_(E.value?"Editar":"Nueva")+" Línea de Acción ",1)]),_:1}),e(z,null,{default:o(()=>[e(F,{ref_key:"form",ref:R,onSubmit:ge(D,["prevent"])},{default:o(()=>[e(le,{modelValue:f.codigo,"onUpdate:modelValue":n[7]||(n[7]=L=>f.codigo=L),label:"Código*",rules:[L=>!!L||"El código es requerido"],required:"",class:"mb-3",variant:"outlined"},null,8,["modelValue","rules"]),e(le,{modelValue:f.titulo,"onUpdate:modelValue":n[8]||(n[8]=L=>f.titulo=L),label:"Título*",rules:[L=>!!L||"El título es requerido"],required:"",class:"mb-3",variant:"outlined"},null,8,["modelValue","rules"]),e(ye,{modelValue:f.descripcion,"onUpdate:modelValue":n[9]||(n[9]=L=>f.descripcion=L),label:"Descripción",rows:"3",class:"mb-3",variant:"outlined"},null,8,["modelValue"])]),_:1},512),n[19]||(n[19]=c("small",{class:"text-caption text-grey"},"* Campos obligatorios",-1))]),_:1,__:[19]}),e(h,null,{default:o(()=>[e(Y),e(m,{color:"grey-darken-1",variant:"text",onClick:P},{default:o(()=>n[20]||(n[20]=[i(" Cancelar ")])),_:1,__:[20]}),e(m,{color:"primary",variant:"elevated",onClick:D,loading:p.value},{default:o(()=>[i(_(E.value?"Actualizar":"Guardar"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ie,{modelValue:g.value,"onUpdate:modelValue":n[12]||(n[12]=L=>g.value=L),"max-width":"400"},{default:o(()=>[e(ae,null,{default:o(()=>[e(pe,{class:"text-h6"},{default:o(()=>n[21]||(n[21]=[i("Confirmar eliminación")])),_:1,__:[21]}),e(z,null,{default:o(()=>n[22]||(n[22]=[i(" ¿Estás seguro de eliminar esta línea de acción? Esta acción no se puede deshacer. ")])),_:1,__:[22]}),e(h,null,{default:o(()=>[e(Y),e(m,{color:"grey",variant:"text",onClick:n[11]||(n[11]=L=>g.value=!1)},{default:o(()=>n[23]||(n[23]=[i("Cancelar")])),_:1,__:[23]}),e(m,{color:"red",variant:"elevated",onClick:M},{default:o(()=>n[24]||(n[24]=[i("Eliminar")])),_:1,__:[24]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},uo=ve(ro,[["__scopeId","data-v-e0eb857f"]]),co={class:"d-flex align-center"},vo={__name:"ProyectoNuevoView",setup(w){const r=se(),g=N(!1),E=N(1),p=["Proyecto","Objetivos","Resultados","Productos","Indicadores","Linea Accion/Actividad","Resumen"],R=()=>{alert("Enviar formulario")};return(t,d)=>{const I=a("v-progress-circular"),O=a("v-overlay"),l=a("v-icon"),y=a("v-col"),x=a("v-row"),H=a("v-card-text"),S=a("v-card"),B=a("v-stepper-item"),T=a("v-stepper-header"),A=a("v-stepper-window-item"),b=a("v-card-title"),U=a("v-card-subtitle"),X=a("v-card-item"),J=a("v-divider"),f=a("v-card-actions"),C=a("v-stepper-window"),P=a("v-stepper"),s=a("v-btn"),D=a("v-spacer"),G=a("v-container");return v(),j(G,null,{default:o(()=>[e(O,{"model-value":g.value,class:"align-center justify-center"},{default:o(()=>[e(I,{indeterminate:"",color:"primary",size:"64"}),d[3]||(d[3]=c("p",{class:"mt-4 text-h6"},"Cargando proyecto...",-1))]),_:1,__:[3]},8,["model-value"]),g.value?$("",!0):(v(),j(x,{key:0},{default:o(()=>[e(y,{cols:"12",md:"12",lg:"12"},{default:o(()=>[e(Re,{titulo:"Registro de Nuevo Proyecto",icon:"mdi-plus-circle"}),e(S,{class:"mb-4 sticky-summary",elevation:"2"},{default:o(()=>[e(H,{class:"py-2"},{default:o(()=>[e(x,{dense:"",align:"center"},{default:o(()=>[e(y,{cols:"12",sm:"4"},{default:o(()=>[c("div",co,[e(l,{color:"primary",class:"mr-2"},{default:o(()=>d[4]||(d[4]=[i("mdi-file-document")])),_:1,__:[4]}),c("strong",null,_(V(r).nuevoProyecto.proyecto.titulo||"Sin titulo"),1)])]),_:1}),e(y,{cols:"6",sm:"2"},{default:o(()=>[d[5]||(d[5]=c("div",{class:"text-caption"},"Código",-1)),c("div",null,_(V(r).nuevoProyecto.proyecto.codigo||"---"),1)]),_:1,__:[5]}),e(y,{cols:"6",sm:"2"},{default:o(()=>d[6]||(d[6]=[c("div",{class:"text-caption"},"Estado",-1),c("div",null,"En Estructuracion",-1)])),_:1,__:[6]}),e(y,{cols:"6",sm:"2"},{default:o(()=>[d[7]||(d[7]=c("div",{class:"text-caption"},"Objetivos",-1)),c("div",null,_(V(r).nuevoProyecto.objetivoGeneral.length),1)]),_:1,__:[7]}),e(y,{cols:"6",sm:"2"},{default:o(()=>[d[8]||(d[8]=c("div",{class:"text-caption"},"Productos",-1)),c("div",null,_(V(r).nuevoProyecto.productos.length),1)]),_:1,__:[8]})]),_:1})]),_:1})]),_:1}),e(P,{modelValue:E.value,"onUpdate:modelValue":d[0]||(d[0]=M=>E.value=M),"non-linear":""},{default:o(()=>[e(T,null,{default:o(()=>[(v(),k(Q,null,K(p,(M,u)=>e(B,{editable:"",complete:E.value>u+1,key:u,value:u+1},{default:o(()=>[i(_(M),1)]),_:2},1032,["complete","value"])),64))]),_:1}),e(C,null,{default:o(()=>[e(A,{value:1},{default:o(()=>[e(ke)]),_:1}),e(A,{value:2},{default:o(()=>[e(Ce)]),_:1}),e(A,{value:3},{default:o(()=>[e(Oe)]),_:1}),e(A,{value:4},{default:o(()=>[e(Se)]),_:1}),e(A,{value:5},{default:o(()=>[e(to)]),_:1}),e(A,{value:6},{default:o(()=>[e(uo)]),_:1}),e(A,{value:7},{default:o(()=>[e(ao)]),_:1}),e(A,{value:8},{default:o(()=>[e(S,{class:"my-card"},{default:o(()=>[e(X,null,{default:o(()=>[e(b,{class:"text-h5"},{default:o(()=>[i(_(t.nuevoProyecto),1)]),_:1}),e(U,null,{default:o(()=>[i(" Codigo: "+_(t.nuevoProyecto),1)]),_:1})]),_:1}),e(H,null,{default:o(()=>[d[9]||(d[9]=c("h4",null,"Descripcion",-1)),c("p",null,_(),1),d[10]||(d[10]=c("h4",null,"Fecha de creacion",-1)),c("p",null,_(),1),d[11]||(d[11]=c("h4",null,"Fecha de inicio",-1)),c("p",null,_(),1),d[12]||(d[12]=c("h4",null,"Fecha de finalizacion",-1)),c("p",null,_(),1),d[13]||(d[13]=c("h4",null,"Responsable",-1)),c("p",null,_(),1),d[14]||(d[14]=c("h4",null,"Instacia gestora",-1)),c("p",null,_(),1),e(J),d[15]||(d[15]=c("h4",null,"Objetivo General",-1)),c("p",null,"CODIGO: "+_(),1),c("p",null,"DESCRIPCION: "+_(),1),c("p",null,"SUPUESTOS: "+_(),1),c("p",null,"RIESGOS: "+_(),1),e(J),d[16]||(d[16]=c("h4",null,"Objetivos Especificos",-1)),(v(!0),k(Q,null,K(t.nuevoProyecto.objetivoEspecifico,(M,u)=>(v(),k("p",{key:u},_(M),1))),128))]),_:1,__:[9,10,11,12,13,14,15,16]}),t.$slots.actions?(v(),j(f,{key:0},{default:o(()=>[je(t.$slots,"actions",{},void 0,!0)]),_:3})):$("",!0)]),_:3})]),_:3})]),_:3})]),_:3},8,["modelValue"]),e(f,{class:"mt-4"},{default:o(()=>[e(s,{onClick:d[1]||(d[1]=M=>E.value--),disabled:E.value===1,variant:"outlined"},{default:o(()=>d[17]||(d[17]=[i("Atras")])),_:1,__:[17]},8,["disabled"]),e(D),E.value<8?(v(),j(s,{key:0,onClick:d[2]||(d[2]=M=>E.value++),variant:"outlined",color:"primary"},{default:o(()=>d[18]||(d[18]=[i("Siguiente")])),_:1,__:[18]})):(v(),j(s,{key:1,onClick:R,variant:"elevated",color:"success"},{default:o(()=>d[19]||(d[19]=[i("ENVIAR")])),_:1,__:[19]}))]),_:1})]),_:3})]),_:3}))]),_:3})}}},mo=ve(vo,[["__scopeId","data-v-fb22db60"]]);export{mo as default};
