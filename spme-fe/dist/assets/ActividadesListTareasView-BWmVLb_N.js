import{_ as _a,r as p,c as $,o as ga,g as x,w as l,e as u,u as ya,f as s,h as m,d as a,i as d,l as i,b as y,t as n,F as Q,j as ve,m as pe,q as ba,p as ze}from"./index-BV9e5Yt5.js";const xa={class:"text-caption text-grey"},Va={class:"d-flex flex-wrap gap-2 mt-2"},Ca={class:"d-flex align-center flex-wrap"},wa={class:"mr-2"},Pa={class:"text-caption mt-1"},ka={key:0,class:"text-caption mt-1"},Aa={key:0},Ea={key:1,class:"text-caption mt-1"},Ta={key:0},Ia={class:"d-flex"},Na={key:0},Ua={key:0},Da={key:1},ja={key:2},Sa={key:3},Ra={key:0,class:"mt-2"},Fa={class:"d-flex justify-space-between align-center mb-4"},Oa={key:0,class:"red--text ml-2"},za={class:"d-flex justify-end mt-4"},La={key:2,class:"d-flex align-center justify-space-between mt-2"},qa={class:"text-caption text-grey"},$a={key:0,class:"red--text ml-2"},Ma={__name:"ActividadesListTareasView",setup(Ba){ya();const A=p({show:!1,text:"",color:"success"}),M=p(!1),B=p(!1),we=p(null),fe=p(!1),T=p([]),C=p(!0),Pe=p(null),ke=p(!1),Le=()=>{C.value=!0;const o=[{id:1,codigo:"ACAP-2023-001",descripcion:"Taller de capacitación en desarrollo web",tipo:"ACAP",fecha_programada:"2023-05-15",duracion:2,fecha_inicio:"2023-05-15",fecha_cierre:"2023-05-16",presupuesto:1500.5,presupuesto_pei:1200,estado:"COMP",procedencia_fondos:"PROY",objetivo_de_actividad:"Capacitar al personal en tecnologías web modernas",descripcion_evaluacion:"Evaluación mediante examen práctico y cuestionario",justificacion_modificacion:""},{id:2,codigo:"PRIN-2023-002",descripcion:"Investigación sobre inteligencia artificial",tipo:"PRIN",fecha_programada:"2023-06-01",duracion:90,fecha_inicio:"2023-06-01",fecha_cierre:null,presupuesto:5e3,presupuesto_pei:4500,estado:"EJEC",procedencia_fondos:"UG",objetivo_de_actividad:"Investigar aplicaciones prácticas de IA en nuestro sector",descripcion_evaluacion:"Informe final y presentación de resultados",justificacion_modificacion:""},{id:3,codigo:"AOP-2023-003",descripcion:"Mantenimiento de servidores",tipo:"AOP",fecha_programada:"2023-04-10",duracion:1,fecha_inicio:null,fecha_cierre:null,presupuesto:800,presupuesto_pei:800,estado:"PLAN",procedencia_fondos:"UG",objetivo_de_actividad:"Mantener los servidores en óptimas condiciones",descripcion_evaluacion:"Verificación de funcionamiento post-mantenimiento",justificacion_modificacion:"Se pospuso por falta de personal técnico"},{id:4,codigo:"CSNS-2023-004",descripcion:"Campaña de sensibilización ambiental",tipo:"CSNS",fecha_programada:"2023-07-20",duracion:5,fecha_inicio:null,fecha_cierre:null,presupuesto:2e3,presupuesto_pei:1500,estado:"SPLAN",procedencia_fondos:"PROY",objetivo_de_actividad:"Concientizar sobre prácticas ambientales sostenibles",descripcion_evaluacion:"Encuestas pre y post campaña",justificacion_modificacion:""},{id:5,codigo:"PDES-2023-005",descripcion:"Desarrollo de nuevo módulo de software",tipo:"PDES",fecha_programada:"2023-03-01",duracion:120,fecha_inicio:"2023-03-01",fecha_cierre:"2023-06-29",presupuesto:7500,presupuesto_pei:7e3,estado:"COMP",procedencia_fondos:"PROY",objetivo_de_actividad:"Desarrollar módulo de gestión de proyectos",descripcion_evaluacion:"Pruebas de usabilidad y rendimiento",justificacion_modificacion:""},{id:6,codigo:"AINC-2023-006",descripcion:"Reunión con socios estratégicos",tipo:"AINC",fecha_programada:"2023-08-15",duracion:1,fecha_inicio:null,fecha_cierre:null,presupuesto:500,presupuesto_pei:500,estado:"PLAN",procedencia_fondos:"UG",objetivo_de_actividad:"Fortalecer alianzas con socios clave",descripcion_evaluacion:"Seguimiento a acuerdos establecidos",justificacion_modificacion:""},{id:7,codigo:"AART-2023-007",descripcion:"Taller interdepartamental",tipo:"AART",fecha_programada:"2023-09-10",duracion:3,fecha_inicio:null,fecha_cierre:null,presupuesto:1200,presupuesto_pei:1e3,estado:"SPLAN",procedencia_fondos:"PROY",objetivo_de_actividad:"Mejorar la comunicación entre departamentos",descripcion_evaluacion:"Encuesta de satisfacción",justificacion_modificacion:"Cambio de fecha por disponibilidad de facilitador"}];T.value=o,ke.value=T.value.length===0,C.value=!1},H=p(!1),Ae=p(null),K=p(null),W=p(""),X=p("datos"),Z=p([]),h=p(null),ee=p(null),O=p(1),S=p(10),me=[{text:"Reprogramación",value:"SPLAN"},{text:"Planificación",value:"PLAN"},{text:"En Ejecución",value:"EJEC"},{text:"En Reporte",value:"POST"},{text:"Retraso",value:"CANC"},{text:"Finalizado",value:"COMP"}],_e=[{text:"No definido",value:"NODEF"},{text:"Capacitación",value:"ACAP"},{text:"Investigación",value:"PRIN"},{text:"Operativa",value:"AOP"},{text:"Sensibilización",value:"CSNS"},{text:"Desarrollo",value:"PDES"},{text:"Incidencia",value:"AINC"},{text:"Articulación",value:"AART"}],ge=[{text:"Fondos de la Institución",value:"UG"},{text:"Fondos del proyecto",value:"PROY"}],v=p({codigo:"",descripcion:"",tipo:"NODEF",fecha_programada:null,duracion:null,fecha_inicio:null,fecha_cierre:null,presupuesto:null,presupuesto_pei:null,estado:"SPLAN",procedencia_fondos:"PROY",objetivo_de_actividad:"",descripcion_evaluacion:"",justificacion_modificacion:"",datos_actividad:null}),ae=p(!1),z=p(null),V=p([]),b=p({id:null,titulo:"",descripcion:"",fecha:null,estado:"pendiente",completada:!1,actividadId:null}),le=p(null),Y=p(!1),te=p(!1),qe=[{text:"Realizada",value:"realizada"},{text:"Pendiente",value:"pendiente"},{text:"Retraso",value:"Retraso"},{text:"Postergada",value:"Postergada"}],$e=[{title:"Título",key:"titulo"},{title:"Descripción",key:"descripcion"},{title:"Fecha",key:"fecha"},{title:"Estado",key:"estado"},{title:"Completada",key:"completada"},{title:"Acciones",key:"actions"}],w=$(()=>{let o=T.value;if(W.value){const e=W.value.toLowerCase();o=o.filter(c=>c.codigo&&c.codigo.toLowerCase().includes(e)||c.descripcion&&c.descripcion.toLowerCase().includes(e))}return Z.value.length>0&&(o=o.filter(e=>Z.value.includes(e.estado))),h.value&&(o=o.filter(e=>e.tipo===h.value)),ee.value&&(o=o.filter(e=>e.procedencia_fondos===ee.value)),o}),Me=$(()=>z.value?V.value.filter(o=>o.actividadId===z.value.id).sort((o,e)=>new Date(o.fecha)-new Date(e.fecha)):[]),Be=$(()=>{const o=(O.value-1)*S.value,e=o+S.value;return w.value.slice(o,e)}),Ee=$(()=>Math.ceil(w.value.length/S.value)),Ye=$(()=>(O.value-1)*S.value+1),Ge=$(()=>{const o=O.value*S.value;return o>w.value.length?w.value.length:o});ga(()=>{setTimeout(()=>{Le(),V.value=[{id:1,titulo:"Preparar material didáctico",descripcion:"Elaborar presentaciones y ejercicios prácticos",fecha:"2023-05-10",estado:"realizada",completada:!0,actividadId:1},{id:2,titulo:"Confirmar asistencia de participantes",descripcion:"Enviar recordatorios y confirmar asistencia",fecha:"2023-05-12",estado:"realizada",completada:!0,actividadId:1},{id:3,titulo:"Recopilar bibliografía",descripcion:"Buscar y organizar material de referencia",fecha:"2023-06-15",estado:"pendiente",completada:!1,actividadId:2},{id:4,titulo:"Realizar mantenimiento preventivo",descripcion:"Limpiar y verificar componentes",fecha:"2023-04-05",estado:"Retraso",completada:!1,actividadId:3},{id:5,titulo:"Diseñar folletos informativos",descripcion:"Crear material gráfico para la campaña",fecha:"2023-07-25",estado:"Postergada",completada:!1,actividadId:4}]},800)});const I=o=>{if(!o)return"No definida";const e={year:"numeric",month:"long",day:"numeric"};return new Date(o).toLocaleDateString("es-ES",e)},ye=o=>{switch(o){case"SPLAN":return"yellow";case"PLAN":return"light-blue";case"EJEC":return"orange";case"POST":return"light-green";case"CANC":return"red";case"COMP":return"green";default:return"grey"}},Te=o=>{const e=me.find(c=>c.value===o);return e?e.text:o},Ie=o=>{const e=_e.find(c=>c.value===o);return e?e.text:o},Ne=o=>{const e=ge.find(c=>c.value===o);return e?e.text:o},Je=o=>{switch(o){case"ACAP":return"mdi-school";case"PRIN":return"mdi-microscope";case"AOP":return"mdi-cog";case"CSNS":return"mdi-bullhorn";case"PDES":return"mdi-home-city";case"AINC":return"mdi-handshake";case"AART":return"mdi-account-group";default:return"mdi-calendar"}},be=o=>o?new Intl.NumberFormat("es-US",{style:"currency",currency:"USD"}).format(o):"$0.00",oe=o=>w.value.filter(e=>e.estado===o).length,Qe=o=>{z.value=T.value.find(e=>e.id===o),ae.value=!0},ie=o=>V.value.filter(e=>e.actividadId===o).sort((e,c)=>new Date(e.fecha)-new Date(c.fecha)),He=o=>ie(o).length,Ke=o=>{const e=ie(o);return{realizada:e.filter(c=>c.estado==="realizada").length,pendiente:e.filter(c=>c.estado==="pendiente").length,Retraso:e.filter(c=>c.estado==="Retraso").length,Postergada:e.filter(c=>c.estado==="Postergada").length}},ne=o=>{switch(o){case"realizada":return"green";case"pendiente":return"blue";case"Retraso":return"orange";case"Postergada":return"purple";default:return"grey"}},xe=o=>{if(o.estado==="realizada"||o.estado==="Postergada")return!1;const e=new Date;return new Date(o.fecha)<e},We=()=>{if(te.value){const o=V.value.findIndex(e=>e.id===b.value.id);o!==-1&&(V.value[o]={...b.value})}else{const o=V.value.length>0?Math.max(...V.value.map(e=>e.id))+1:1;V.value.push({...b.value,id:o,actividadId:z.value.id})}ea()},Xe=o=>{b.value={...o},te.value=!0},Ze=o=>{le.value=o,Y.value=!0},he=()=>{V.value=V.value.filter(o=>o.id!==le.value.id),Y.value=!1,le.value=null},Ue=o=>{const e=V.value.findIndex(c=>c.id===o.id);if(e!==-1){let c=o.completada?"realizada":"pendiente";!o.completada&&xe(o)&&(c="Retraso"),V.value[e]={...o,estado:c}}},ea=()=>{var o;b.value={id:null,titulo:"",descripcion:"",fecha:null,estado:"pendiente",completada:!1,actividadId:((o=z.value)==null?void 0:o.id)||null},te.value=!1},aa=async()=>{try{C.value=!0,T.value=T.value.filter(o=>o.id!==Ae.value.id),A.value={show:!0,text:"Actividad eliminada exitosamente",color:"success"}}catch(o){Pe.value="Error al eliminar la actividad: Intente nuevamente más tarde",console.error("Error al eliminar actividad",o),A.value={show:!0,text:Pe.value,color:"error"}}finally{C.value=!1,H.value=!1}},la=o=>{K.value=K.value===o?null:o},De=async()=>{const{valid:o}=await we.value.validate();o&&(B.value=!0)},ta=async()=>{try{C.value=!0;const e={id:Math.max(...T.value.map(c=>c.id))+1,...v.value,datos_actividad:{}};T.value.unshift(e),A.value={show:!0,text:"Actividad creada exitosamente",color:"success"},B.value=!1,M.value=!1,je()}catch(o){console.error("Error al crear actividad:",o),A.value={show:!0,text:"Error al crear la actividad",color:"error"}}finally{C.value=!1}},je=()=>{v.value={codigo:"",descripcion:"",tipo:"NODEF",fecha_programada:null,duracion:null,fecha_inicio:null,fecha_cierre:null,presupuesto:null,presupuesto_pei:null,estado:"SPLAN",procedencia_fondos:"PROY",objetivo_de_actividad:"",descripcion_evaluacion:"",justificacion_modificacion:"",datos_actividad:null}},oa=()=>{je(),M.value=!1},ia=[o=>!!o||"El código es requerido",o=>o&&o.length<=60||"Máximo 60 caracteres"];return(o,e)=>{const c=u("v-progress-linear"),g=u("v-icon"),_=u("v-btn"),N=u("v-card-text"),E=u("v-card"),G=u("v-card-title"),P=u("v-text-field"),L=u("v-chip"),na=u("v-chip-group"),R=u("v-select"),da=u("v-avatar"),U=u("v-list-item-title"),D=u("v-list-item-subtitle"),de=u("v-tooltip"),j=u("v-list-item"),ue=u("v-tab"),ua=u("v-tabs"),f=u("v-col"),k=u("v-row"),re=u("v-window-item"),Ve=u("v-checkbox"),Ce=u("v-list"),ra=u("v-alert"),sa=u("v-window"),ca=u("v-expand-transition"),va=u("v-pagination"),q=u("v-spacer"),se=u("v-card-actions"),J=u("v-dialog"),Se=u("v-toolbar"),ce=u("v-textarea"),Re=u("v-divider"),Fe=u("v-container"),Oe=u("v-form"),pa=u("v-toolbar-title"),fa=u("v-data-table"),ma=u("v-snackbar");return s(),x(Fe,null,{default:l(()=>[C.value?(s(),x(c,{key:0,indeterminate:"",color:"primary",height:"4",class:"mb-4"})):m("",!0),ke.value&&!C.value?(s(),x(E,{key:1,class:"mb-4"},{default:l(()=>[a(N,{class:"text-center py-8"},{default:l(()=>[a(g,{size:"64",color:"grey lighten-1"},{default:l(()=>e[40]||(e[40]=[i("mdi-calendar-remove")])),_:1,__:[40]}),e[43]||(e[43]=d("h3",{class:"text-h5 mt-4"},"No hay actividades registradas",-1)),e[44]||(e[44]=d("p",{class:"text-grey mt-2"},"Parece que aún no has creado ninguna actividad",-1)),a(_,{color:"primary",onClick:e[0]||(e[0]=t=>M.value=!0),class:"mt-4"},{default:l(()=>[a(g,{left:""},{default:l(()=>e[41]||(e[41]=[i("mdi-plus")])),_:1,__:[41]}),e[42]||(e[42]=i(" Crear primera actividad "))]),_:1,__:[42]})]),_:1,__:[43,44]})]),_:1})):(s(),x(k,{key:2},{default:l(()=>[a(f,{cols:"12",md:"9",lg:"9"},{default:l(()=>[a(E,{class:"pa-4",elevation:"2"},{default:l(()=>[a(G,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[45]||(e[45]=d("span",null,"Lista de Actividades",-1)),d("span",xa,"Total: "+n(w.value.length),1)]),_:1,__:[45]}),a(N,{class:"pt-0 pb-4"},{default:l(()=>[a(P,{modelValue:W.value,"onUpdate:modelValue":e[1]||(e[1]=t=>W.value=t),label:"Buscar actividades (por código o descripción)","prepend-inner-icon":"mdi-magnify",variant:"outlined",clearable:"",density:"comfortable",onInput:e[2]||(e[2]=t=>O.value=1)},null,8,["modelValue"]),d("div",Va,[a(na,{modelValue:Z.value,"onUpdate:modelValue":e[3]||(e[3]=t=>Z.value=t),multiple:"",column:""},{default:l(()=>[(s(),y(Q,null,ve(me,t=>a(L,{key:t.value,value:t.value,filter:"",color:ye(t.value),variant:"outlined"},{default:l(()=>[i(n(t.text),1)]),_:2},1032,["value","color"])),64))]),_:1},8,["modelValue"]),a(R,{modelValue:h.value,"onUpdate:modelValue":e[4]||(e[4]=t=>h.value=t),items:_e,"item-value":"value","item-title":"text",label:"Tipo de actividad",clearable:"",variant:"outlined",density:"compact",style:{"min-width":"200px"}},null,8,["modelValue"]),a(R,{modelValue:ee.value,"onUpdate:modelValue":e[5]||(e[5]=t=>ee.value=t),items:ge,"item-value":"value","item-title":"text",label:"Procedencia fondos",clearable:"",variant:"outlined",density:"compact",style:{"min-width":"200px"}},null,8,["modelValue"])])]),_:1}),C.value?m("",!0):(s(),x(Ce,{key:0,class:"py-0"},{default:l(()=>[(s(!0),y(Q,null,ve(Be.value,t=>(s(),y(Q,{key:t.id},[a(j,{value:t,class:"mb-2"},{prepend:l(()=>[a(da,{color:ye(t.estado),class:"mr-4"},{default:l(()=>[a(g,{dark:""},{default:l(()=>[i(n(Je(t.tipo)),1)]),_:2},1024)]),_:2},1032,["color"])]),append:l(()=>[d("div",Ia,[a(de,{text:"Solicitud de Fondos",location:"top"},{activator:l(({props:r})=>[parseInt(o.$route.query.showButton)===1?(s(),x(_,pe({key:0,ref_for:!0},r,{icon:"mdi-file-document-edit-outline",variant:"text",color:"primary",to:"/pei/formulario01"}),null,16)):m("",!0)]),_:1}),a(de,{text:"Solicitud de Reposicion",location:"top"},{activator:l(({props:r})=>[parseInt(o.$route.query.showButton)===1?(s(),x(_,pe({key:0,ref_for:!0},r,{icon:"mdi-file-document-edit-outline",variant:"text",color:"warning",to:"/pei/formulario03"}),null,16)):m("",!0)]),_:1}),a(de,{text:"Rendicion de Cuentas",location:"top"},{activator:l(({props:r})=>[parseInt(o.$route.query.showButton)===2?(s(),x(_,pe({key:0,ref_for:!0},r,{icon:"mdi-file-document-edit-outline",variant:"text",color:"error",to:"/pei/formulario02"}),null,16)):m("",!0)]),_:1}),a(de,{text:"Informe de Actividad",location:"top"},{activator:l(({props:r})=>[parseInt(o.$route.query.showButton)===3?(s(),x(_,pe({key:0,ref_for:!0},r,{icon:"mdi-chevron-down",variant:"text",color:"info",onClick:F=>la(t.id),class:{"rotate-180":K.value===t.id}}),null,16,["onClick","class"])):m("",!0)]),_:2},1024)])]),default:l(()=>[a(U,{class:"font-weight-bold"},{default:l(()=>[i(n(Ie(t.tipo))+": "+n(t.codigo),1)]),_:2},1024),a(D,{class:"mt-1"},{default:l(()=>[d("div",Ca,[a(L,{small:"",color:ye(t.estado),"text-color":"white",class:"mr-2"},{default:l(()=>[i(n(Te(t.estado)),1)]),_:2},1032,["color"]),d("span",wa,"Presupuesto: "+n(be(t.presupuesto)),1),d("span",null,"Fondos: "+n(Ne(t.procedencia_fondos)),1)]),d("div",Pa,n(t.descripcion),1),t.fecha_programada?(s(),y("div",ka,[e[46]||(e[46]=d("strong",null,"Programada:",-1)),i(" "+n(I(t.fecha_programada))+" ",1),t.duracion?(s(),y("span",Aa," (Duración: "+n(t.duracion)+" días)",1)):m("",!0)])):m("",!0),t.fecha_inicio?(s(),y("div",Ea,[e[47]||(e[47]=d("strong",null,"Ejecución:",-1)),i(" "+n(I(t.fecha_inicio))+" ",1),t.fecha_cierre?(s(),y("span",Ta,"a "+n(I(t.fecha_cierre)),1)):m("",!0)])):m("",!0)]),_:2},1024)]),_:2},1032,["value"]),a(ca,null,{default:l(()=>[K.value===t.id?(s(),y("div",Na,[a(E,{elevation:"0",class:"ml-10 mr-4 mb-4 bg-grey-lighten-4"},{default:l(()=>[a(ua,{modelValue:X.value,"onUpdate:modelValue":e[6]||(e[6]=r=>X.value=r),color:"primary",grow:""},{default:l(()=>[a(ue,{value:"datos"},{default:l(()=>[a(g,{left:""},{default:l(()=>e[48]||(e[48]=[i("mdi-information")])),_:1,__:[48]}),e[49]||(e[49]=i(" Datos "))]),_:1,__:[49]}),a(ue,{value:"objetivo"},{default:l(()=>[a(g,{left:""},{default:l(()=>e[50]||(e[50]=[i("mdi-target")])),_:1,__:[50]}),e[51]||(e[51]=i(" Objetivo "))]),_:1,__:[51]}),a(ue,{value:"evaluacion"},{default:l(()=>[a(g,{left:""},{default:l(()=>e[52]||(e[52]=[i("mdi-clipboard-text")])),_:1,__:[52]}),e[53]||(e[53]=i(" Evaluación "))]),_:1,__:[53]}),a(ue,{value:"tareas"},{default:l(()=>[a(g,{left:""},{default:l(()=>e[54]||(e[54]=[i("mdi-checkbox-marked-circle-outline")])),_:1,__:[54]}),e[55]||(e[55]=i(" Tareas ")),a(L,{color:"primary",small:"",class:"ml-2"},{default:l(()=>[i(n(He(t.id)),1)]),_:2},1024)]),_:2,__:[55]},1024)]),_:2},1032,["modelValue"]),a(N,{class:"pt-4"},{default:l(()=>[a(sa,{modelValue:X.value,"onUpdate:modelValue":e[7]||(e[7]=r=>X.value=r)},{default:l(()=>[a(re,{value:"datos"},{default:l(()=>[a(k,null,{default:l(()=>[a(f,{cols:"12",md:"6"},{default:l(()=>[d("p",null,[e[56]||(e[56]=d("strong",null,"Tipo:",-1)),i(" "+n(Ie(t.tipo)),1)]),d("p",null,[e[57]||(e[57]=d("strong",null,"Estado:",-1)),i(" "+n(Te(t.estado)),1)]),d("p",null,[e[58]||(e[58]=d("strong",null,"Código:",-1)),i(" "+n(t.codigo),1)]),d("p",null,[e[59]||(e[59]=d("strong",null,"Presupuesto:",-1)),i(" "+n(be(t.presupuesto)),1)]),d("p",null,[e[60]||(e[60]=d("strong",null,"Presupuesto PEI:",-1)),i(" "+n(be(t.presupuesto_pei)),1)])]),_:2},1024),a(f,{cols:"12",md:"6"},{default:l(()=>[d("p",null,[e[61]||(e[61]=d("strong",null,"Fondos:",-1)),i(" "+n(Ne(t.procedencia_fondos)),1)]),t.fecha_programada?(s(),y("p",Ua,[e[62]||(e[62]=d("strong",null,"Fecha programada:",-1)),i(" "+n(I(t.fecha_programada)),1)])):m("",!0),t.duracion?(s(),y("p",Da,[e[63]||(e[63]=d("strong",null,"Duración:",-1)),i(" "+n(t.duracion)+" días ",1)])):m("",!0),t.fecha_inicio?(s(),y("p",ja,[e[64]||(e[64]=d("strong",null,"Fecha inicio:",-1)),i(" "+n(I(t.fecha_inicio)),1)])):m("",!0),t.fecha_cierre?(s(),y("p",Sa,[e[65]||(e[65]=d("strong",null,"Fecha cierre:",-1)),i(" "+n(I(t.fecha_cierre)),1)])):m("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(re,{value:"objetivo"},{default:l(()=>[e[66]||(e[66]=d("p",null,[d("strong",null,"Objetivo:")],-1)),d("p",null,n(t.objetivo_de_actividad||"No se ha definido un objetivo"),1)]),_:2,__:[66]},1024),a(re,{value:"evaluacion"},{default:l(()=>[e[69]||(e[69]=d("p",null,[d("strong",null,"Descripción de evaluación:")],-1)),d("p",null,n(t.descripcion_evaluacion||"No se ha definido una evaluación"),1),t.justificacion_modificacion?(s(),y("p",Ra,[e[67]||(e[67]=d("strong",null,"Justificación de modificación:",-1)),e[68]||(e[68]=d("br",null,null,-1)),i(" "+n(t.justificacion_modificacion),1)])):m("",!0)]),_:2,__:[69]},1024),a(re,{value:"tareas"},{default:l(()=>[d("div",Fa,[d("div",null,[(s(!0),y(Q,null,ve(Ke(t.id),(r,F)=>(s(),x(L,{key:F,color:ne(F),class:"mr-2 mb-2"},{default:l(()=>[i(n(F)+": "+n(r),1)]),_:2},1032,["color"]))),128))]),a(_,{color:"primary",onClick:r=>Qe(t.id)},{default:l(()=>[a(g,{left:""},{default:l(()=>e[70]||(e[70]=[i("mdi-cog")])),_:1,__:[70]}),e[71]||(e[71]=i(" Administrar Tareas "))]),_:2,__:[71]},1032,["onClick"])]),ie(t.id).length>0?(s(),x(Ce,{key:0},{default:l(()=>[(s(!0),y(Q,null,ve(ie(t.id),r=>(s(),x(j,{key:r.id,class:ba({"bg-green-lighten-5":r.estado==="realizada","bg-orange-lighten-5":r.estado==="Retraso","bg-blue-lighten-5":r.estado==="Postergada"})},{prepend:l(()=>[a(Ve,{modelValue:r.completada,"onUpdate:modelValue":F=>r.completada=F,color:ne(r.estado),onChange:F=>Ue(r)},null,8,["modelValue","onUpdate:modelValue","color","onChange"])]),default:l(()=>[a(U,null,{default:l(()=>[d("strong",null,n(r.titulo),1),a(L,{small:"",color:ne(r.estado),class:"ml-2"},{default:l(()=>[i(n(r.estado),1)]),_:2},1032,["color"])]),_:2},1024),a(D,null,{default:l(()=>[i(n(r.descripcion),1)]),_:2},1024),a(D,{class:"mt-1"},{default:l(()=>[a(g,{small:""},{default:l(()=>e[72]||(e[72]=[i("mdi-calendar")])),_:1,__:[72]}),i(" "+n(I(r.fecha))+" ",1),xe(r)?(s(),y("span",Oa," (Atrasada) ")):m("",!0)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:2},1024)):(s(),x(ra,{key:1,type:"info"},{default:l(()=>e[73]||(e[73]=[i(" No hay tareas registradas para esta actividad ")])),_:1,__:[73]}))]),_:2},1024)]),_:2},1032,["modelValue"]),d("div",za,[a(_,{color:"primary",variant:"text",size:"small",to:`/actividad/${t.id}/detalle`},{default:l(()=>e[74]||(e[74]=[i(" Ver detalles completos ")])),_:2,__:[74]},1032,["to"])])]),_:2},1024)]),_:2},1024)])):m("",!0)]),_:2},1024)],64))),128)),w.value.length===0&&!C.value?(s(),x(j,{key:0},{default:l(()=>[a(U,{class:"text-grey"},{default:l(()=>e[75]||(e[75]=[i("No se encontraron actividades")])),_:1,__:[75]})]),_:1})):m("",!0)]),_:1})),Ee.value>1?(s(),x(va,{key:1,modelValue:O.value,"onUpdate:modelValue":e[8]||(e[8]=t=>O.value=t),length:Ee.value,"total-visible":7,class:"mt-4"},null,8,["modelValue","length"])):m("",!0),w.value.length>0?(s(),y("div",La,[d("span",qa," Mostrando "+n(Ye.value)+"-"+n(Ge.value)+" de "+n(w.value.length),1),a(R,{modelValue:S.value,"onUpdate:modelValue":e[9]||(e[9]=t=>S.value=t),items:[5,10,20,50],label:"Items por página",density:"compact",style:{"max-width":"150px"},variant:"outlined"},null,8,["modelValue"])])):m("",!0)]),_:1})]),_:1}),a(f,{cols:"12",md:"3",lg:"3"},{default:l(()=>[a(E,{elevation:"2"},{default:l(()=>[a(G,{class:"primary white--text"},{default:l(()=>[a(g,{left:""},{default:l(()=>e[76]||(e[76]=[i("mdi-chart-box")])),_:1,__:[76]}),e[77]||(e[77]=i(" Estadísticas "))]),_:1,__:[77]}),a(Ce,{density:"comfortable"},{default:l(()=>[a(j,null,{prepend:l(()=>[a(g,{color:"primary"},{default:l(()=>e[78]||(e[78]=[i("mdi-calendar-check")])),_:1,__:[78]})]),default:l(()=>[a(U,null,{default:l(()=>e[79]||(e[79]=[i("Total actividades")])),_:1,__:[79]}),a(D,{class:"text-right"},{default:l(()=>[i(n(w.value.length),1)]),_:1})]),_:1}),a(j,null,{prepend:l(()=>[a(g,{color:"yellow"},{default:l(()=>e[80]||(e[80]=[i("mdi-calendar-question")])),_:1,__:[80]})]),default:l(()=>[a(U,null,{default:l(()=>e[81]||(e[81]=[i("Reprogramación")])),_:1,__:[81]}),a(D,{class:"text-right"},{default:l(()=>[i(n(oe("SPLAN")),1)]),_:1})]),_:1}),a(j,null,{prepend:l(()=>[a(g,{color:"light-blue"},{default:l(()=>e[82]||(e[82]=[i("mdi-calendar-edit")])),_:1,__:[82]})]),default:l(()=>[a(U,null,{default:l(()=>e[83]||(e[83]=[i("Planificación")])),_:1,__:[83]}),a(D,{class:"text-right"},{default:l(()=>[i(n(oe("PLAN")),1)]),_:1})]),_:1}),a(j,null,{prepend:l(()=>[a(g,{color:"orange"},{default:l(()=>e[84]||(e[84]=[i("mdi-progress-clock")])),_:1,__:[84]})]),default:l(()=>[a(U,null,{default:l(()=>e[85]||(e[85]=[i("En Ejecución")])),_:1,__:[85]}),a(D,{class:"text-right"},{default:l(()=>[i(n(oe("EJEC")),1)]),_:1})]),_:1}),a(j,null,{prepend:l(()=>[a(g,{color:"green"},{default:l(()=>e[86]||(e[86]=[i("mdi-check-circle")])),_:1,__:[86]})]),default:l(()=>[a(U,null,{default:l(()=>e[87]||(e[87]=[i("Finalizado")])),_:1,__:[87]}),a(D,{class:"text-right"},{default:l(()=>[i(n(oe("COMP")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})),a(J,{modelValue:H.value,"onUpdate:modelValue":e[11]||(e[11]=t=>H.value=t),"max-width":"400"},{default:l(()=>[a(E,null,{default:l(()=>[a(G,{class:"text-h5"},{default:l(()=>e[88]||(e[88]=[i("Confirmar eliminación")])),_:1,__:[88]}),a(N,null,{default:l(()=>{var t;return[i(' ¿Estás seguro de que deseas eliminar la ACTIVIDAD: "'+n((t=Ae.value)==null?void 0:t.codigo)+'"? ',1)]}),_:1}),a(se,null,{default:l(()=>[a(q),a(_,{color:"grey",onClick:e[10]||(e[10]=t=>H.value=!1)},{default:l(()=>e[89]||(e[89]=[i("Cancelar")])),_:1,__:[89]}),a(_,{color:"error",onClick:aa},{default:l(()=>e[90]||(e[90]=[i("Eliminar")])),_:1,__:[90]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(J,{modelValue:M.value,"onUpdate:modelValue":e[26]||(e[26]=t=>M.value=t),"max-width":"800",persistent:""},{default:l(()=>[a(E,null,{default:l(()=>[a(Se,{color:"primary",title:"Nueva Actividad"}),a(N,null,{default:l(()=>[a(Oe,{ref_key:"form",ref:we,modelValue:fe.value,"onUpdate:modelValue":e[25]||(e[25]=t=>fe.value=t),onSubmit:ze(De,["prevent"])},{default:l(()=>[a(Fe,null,{default:l(()=>[a(k,null,{default:l(()=>[a(f,{cols:"12",md:"6"},{default:l(()=>[a(P,{modelValue:v.value.codigo,"onUpdate:modelValue":e[12]||(e[12]=t=>v.value.codigo=t),label:"Código *",rules:ia,counter:"60",required:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"6"},{default:l(()=>[a(R,{modelValue:v.value.tipo,"onUpdate:modelValue":e[13]||(e[13]=t=>v.value.tipo=t),items:_e,label:"Tipo de actividad *","item-title":"text","item-value":"value",required:"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),a(k,null,{default:l(()=>[a(f,{cols:"12"},{default:l(()=>[a(ce,{modelValue:v.value.descripcion,"onUpdate:modelValue":e[14]||(e[14]=t=>v.value.descripcion=t),label:"Descripción *",rows:"3",variant:"outlined",rules:[t=>!!t||"La descripción es requerida"]},null,8,["modelValue","rules"])]),_:1})]),_:1}),a(k,null,{default:l(()=>[a(f,{cols:"12",md:"6"},{default:l(()=>[a(R,{modelValue:v.value.estado,"onUpdate:modelValue":e[15]||(e[15]=t=>v.value.estado=t),items:me,label:"Estado *","item-title":"text","item-value":"value",required:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"6"},{default:l(()=>[a(R,{modelValue:v.value.procedencia_fondos,"onUpdate:modelValue":e[16]||(e[16]=t=>v.value.procedencia_fondos=t),items:ge,label:"Procedencia de fondos *","item-title":"text","item-value":"value",required:"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),a(k,null,{default:l(()=>[a(f,{cols:"12",md:"6"},{default:l(()=>[a(P,{modelValue:v.value.presupuesto,"onUpdate:modelValue":e[17]||(e[17]=t=>v.value.presupuesto=t),label:"Presupuesto",type:"number",step:"0.01",min:"0",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"6"},{default:l(()=>[a(P,{modelValue:v.value.presupuesto_pei,"onUpdate:modelValue":e[18]||(e[18]=t=>v.value.presupuesto_pei=t),label:"Presupuesto PEI",type:"number",step:"0.01",min:"0",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),a(k,null,{default:l(()=>[a(f,{cols:"12",md:"4"},{default:l(()=>[a(P,{label:"Fecha programada",modelValue:v.value.fecha_programada,"onUpdate:modelValue":e[19]||(e[19]=t=>v.value.fecha_programada=t),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"4"},{default:l(()=>[a(P,{label:"Fecha de inicio",modelValue:v.value.fecha_inicio,"onUpdate:modelValue":e[20]||(e[20]=t=>v.value.fecha_inicio=t),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"4"},{default:l(()=>[a(P,{label:"Fecha de cierre",modelValue:v.value.fecha_cierre,"onUpdate:modelValue":e[21]||(e[21]=t=>v.value.fecha_cierre=t),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),a(k,null,{default:l(()=>[a(f,{cols:"12",md:"6"},{default:l(()=>[a(P,{modelValue:v.value.duracion,"onUpdate:modelValue":e[22]||(e[22]=t=>v.value.duracion=t),label:"Duración (días)",type:"number",min:"0",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),a(Re,{class:"my-4"}),a(k,null,{default:l(()=>[a(f,{cols:"12"},{default:l(()=>[a(ce,{modelValue:v.value.objetivo_de_actividad,"onUpdate:modelValue":e[23]||(e[23]=t=>v.value.objetivo_de_actividad=t),label:"Objetivo de la actividad",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12"},{default:l(()=>[a(ce,{modelValue:v.value.descripcion_evaluacion,"onUpdate:modelValue":e[24]||(e[24]=t=>v.value.descripcion_evaluacion=t),label:"Descripción de evaluación",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(se,null,{default:l(()=>[a(q),a(_,{color:"error",variant:"text",onClick:oa},{default:l(()=>e[91]||(e[91]=[i(" Cancelar ")])),_:1,__:[91]}),a(_,{color:"success",variant:"elevated",disabled:!fe.value,onClick:De},{default:l(()=>e[92]||(e[92]=[i(" Guardar ")])),_:1,__:[92]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(J,{modelValue:B.value,"onUpdate:modelValue":e[28]||(e[28]=t=>B.value=t),"max-width":"400"},{default:l(()=>[a(E,null,{default:l(()=>[a(G,{class:"text-h5"},{default:l(()=>e[93]||(e[93]=[i("Confirmar creación")])),_:1,__:[93]}),a(N,null,{default:l(()=>e[94]||(e[94]=[i(" ¿Está seguro que desea crear esta actividad? ")])),_:1,__:[94]}),a(se,null,{default:l(()=>[a(q),a(_,{color:"secondary",variant:"text",onClick:e[27]||(e[27]=t=>B.value=!1)},{default:l(()=>e[95]||(e[95]=[i(" No ")])),_:1,__:[95]}),a(_,{color:"primary",variant:"elevated",onClick:ta},{default:l(()=>e[96]||(e[96]=[i(" Sí, crear ")])),_:1,__:[96]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(J,{modelValue:ae.value,"onUpdate:modelValue":e[35]||(e[35]=t=>ae.value=t),"max-width":"800",persistent:""},{default:l(()=>[a(E,null,{default:l(()=>[a(Se,{color:"primary",dark:""},{default:l(()=>[a(pa,null,{default:l(()=>{var t;return[i(" Administrar Tareas - "+n(((t=z.value)==null?void 0:t.codigo)||""),1)]}),_:1}),a(q),a(_,{icon:"",onClick:e[29]||(e[29]=t=>ae.value=!1)},{default:l(()=>[a(g,null,{default:l(()=>e[97]||(e[97]=[i("mdi-close")])),_:1,__:[97]})]),_:1})]),_:1}),a(N,null,{default:l(()=>[a(Oe,{onSubmit:ze(We,["prevent"])},{default:l(()=>[a(k,null,{default:l(()=>[a(f,{cols:"12",md:"6"},{default:l(()=>[a(P,{modelValue:b.value.titulo,"onUpdate:modelValue":e[30]||(e[30]=t=>b.value.titulo=t),label:"Título de la tarea",required:""},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"6"},{default:l(()=>[a(P,{modelValue:b.value.fecha,"onUpdate:modelValue":e[31]||(e[31]=t=>b.value.fecha=t),label:"Fecha",type:"date",required:""},null,8,["modelValue"])]),_:1}),a(f,{cols:"12"},{default:l(()=>[a(ce,{modelValue:b.value.descripcion,"onUpdate:modelValue":e[32]||(e[32]=t=>b.value.descripcion=t),label:"Descripción",rows:"2"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"6"},{default:l(()=>[a(R,{modelValue:b.value.estado,"onUpdate:modelValue":e[33]||(e[33]=t=>b.value.estado=t),items:qe,label:"Estado","item-title":"text","item-value":"value"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"6",class:"d-flex align-center"},{default:l(()=>[a(Ve,{modelValue:b.value.completada,"onUpdate:modelValue":e[34]||(e[34]=t=>b.value.completada=t),label:"Completada"},null,8,["modelValue"]),a(q),a(_,{color:"primary",type:"submit",disabled:!b.value.titulo||!b.value.fecha},{default:l(()=>[i(n(te.value?"Actualizar":"Agregar")+" Tarea ",1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(Re,{class:"my-4"}),a(fa,{headers:$e,items:Me.value,"items-per-page":5,class:"elevation-1"},{"item.estado":l(({item:t})=>[a(L,{color:ne(t.estado)},{default:l(()=>[i(n(t.estado),1)]),_:2},1032,["color"])]),"item.fecha":l(({item:t})=>[i(n(I(t.fecha))+" ",1),xe(t)?(s(),y("span",$a," (Atrasada) ")):m("",!0)]),"item.completada":l(({item:t})=>[a(Ve,{modelValue:t.completada,"onUpdate:modelValue":r=>t.completada=r,onChange:r=>Ue(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),"item.actions":l(({item:t})=>[a(_,{icon:"",color:"primary",onClick:r=>Xe(t)},{default:l(()=>[a(g,null,{default:l(()=>e[98]||(e[98]=[i("mdi-pencil")])),_:1,__:[98]})]),_:2},1032,["onClick"]),a(_,{icon:"",color:"error",onClick:r=>Ze(t)},{default:l(()=>[a(g,null,{default:l(()=>e[99]||(e[99]=[i("mdi-delete")])),_:1,__:[99]})]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(J,{modelValue:Y.value,"onUpdate:modelValue":e[37]||(e[37]=t=>Y.value=t),"max-width":"400"},{default:l(()=>[a(E,null,{default:l(()=>[a(G,null,{default:l(()=>e[100]||(e[100]=[i("Confirmar Eliminación")])),_:1,__:[100]}),a(N,null,{default:l(()=>{var t;return[i(' ¿Estás seguro de que deseas eliminar la tarea "'+n((t=le.value)==null?void 0:t.titulo)+'"? ',1)]}),_:1}),a(se,null,{default:l(()=>[a(q),a(_,{color:"grey",onClick:e[36]||(e[36]=t=>Y.value=!1)},{default:l(()=>e[101]||(e[101]=[i("Cancelar")])),_:1,__:[101]}),a(_,{color:"error",onClick:he},{default:l(()=>e[102]||(e[102]=[i("Eliminar")])),_:1,__:[102]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ma,{modelValue:A.value.show,"onUpdate:modelValue":e[39]||(e[39]=t=>A.value.show=t),color:A.value.color,timeout:"3000"},{actions:l(()=>[a(_,{variant:"text",onClick:e[38]||(e[38]=t=>A.value.show=!1)},{default:l(()=>e[103]||(e[103]=[i(" Cerrar ")])),_:1,__:[103]})]),default:l(()=>[i(n(A.value.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})}}},Ga=_a(Ma,[["__scopeId","data-v-e1e0816c"]]);export{Ga as default};
