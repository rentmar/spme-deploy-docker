import{u as Z}from"./proyectoStore-DvgR2axb.js";import{_ as ee,c as g,s as te,r as P,o as oe,y as ae,g as y,w as e,e as a,f as _,d as t,h as U,i,t as d,b as j,F as B,j as le,l,m as ne}from"./index-BV9e5Yt5.js";import"./proyectoService-wNf4fISD.js";const se={class:"text-caption text-grey"},ie={class:"d-flex align-center"},de={class:"text-caption mt-1"},re={class:"d-flex"},ce={class:"d-flex align-center"},ue={class:"text-caption mt-1"},_e={class:"d-flex justify-space-between mt-1"},pe={class:"text-caption"},ve={class:"text-caption"},me={__name:"ProyectosActividadesListaView",setup(fe){const C=g(()=>R.value),x=P(""),p=P("ambos"),N=P([{value:"proyectos",title:"Solo Proyectos"},{value:"actividades",title:"Solo Actividades"},{value:"ambos",title:"Proyectos y Actividades"}]),S=ae("peiVigente"),k=Z(),{proyectosPlanificacion:F,cargando:R}=te(k),{obtenerProyectosPlanificacion:z}=k,A=g(()=>{var s;return((s=F.value)==null?void 0:s.map(o=>({...o,tipo:"proyecto"})))||[]});oe(async()=>{await M()});const M=async()=>{try{await z(S.value.id)}catch(s){console.log("Error al cargar la informacion stores",s)}},v=P([{id:1,codigo:"PEI-ACT-001",titulo:"Elaboración del plan estratégico institucional",descripcion:"Actualización del plan estratégico para el próximo periodo",avance:75,fecha:"15/06/2024",responsable:"Unidad de Planeamiento",estado:"En progreso",tipo:"actividad"},{id:2,codigo:"PEI-ACT-002",titulo:"Capacitación en gestión por resultados",descripcion:"Capacitación al personal en metodologías de gestión",avance:30,fecha:"22/07/2024",responsable:"Unidad de Recursos Humanos",estado:"En progreso",tipo:"actividad"},{id:3,codigo:"PEI-ACT-003",titulo:"Actualización del sistema de monitoreo",descripcion:"Implementación de nuevas funcionalidades en el sistema",avance:100,fecha:"10/05/2024",responsable:"Unidad de Tecnología",estado:"Completado",tipo:"actividad"},{id:4,codigo:"PEI-ACT-004",titulo:"Evaluación de desempeño institucional",descripcion:"Evaluación anual del desempeño institucional",avance:0,fecha:"01/08/2024",responsable:"Unidad de Calidad",estado:"Pendiente",tipo:"actividad"}]),w=g(()=>{let s=[];if((p.value==="proyectos"||p.value==="ambos")&&(s=[...s,...A.value]),(p.value==="actividades"||p.value==="ambos")&&(s=[...s,...v.value]),x.value){const o=x.value.toLowerCase();s=s.filter(m=>m.codigo.toLowerCase().includes(o)||m.titulo.toLowerCase().includes(o))}return s}),D=g(()=>v.value.filter(s=>s.avance===100).length),q=g(()=>{if(v.value.length===0)return 0;const s=v.value.reduce((o,m)=>o+m.avance,0);return Math.round(s/v.value.length)});return(s,o)=>{const m=a("v-progress-circular"),G=a("v-overlay"),V=a("v-card-title"),H=a("v-text-field"),b=a("v-col"),Q=a("v-select"),E=a("v-row"),$=a("v-card-text"),r=a("v-icon"),I=a("v-avatar"),c=a("v-list-item-title"),T=a("v-chip"),f=a("v-list-item-subtitle"),J=a("v-btn"),K=a("v-tooltip"),u=a("v-list-item"),O=a("v-progress-linear"),W=a("v-divider"),h=a("v-list"),L=a("v-card"),X=a("v-container");return _(),y(X,null,{default:e(()=>[t(G,{"model-value":C.value,class:"align-center justify-center"},{default:e(()=>[t(m,{indeterminate:"",color:"primary",size:"64"}),o[2]||(o[2]=i("p",{class:"mt-4 text-h6"},"Cargando proyecto...",-1))]),_:1,__:[2]},8,["model-value"]),C.value?U("",!0):(_(),y(E,{key:0},{default:e(()=>[t(b,{cols:"12",md:"8",lg:"9"},{default:e(()=>[t(L,{class:"pa-4",elevation:"2"},{default:e(()=>[t(V,{class:"d-flex justify-space-between align-center"},{default:e(()=>[o[3]||(o[3]=i("span",null,"Proyectos y Actividades",-1)),i("span",se,"Total: "+d(w.value.length),1)]),_:1,__:[3]}),t($,{class:"pt-0 pb-4"},{default:e(()=>[t(E,null,{default:e(()=>[t(b,{cols:"12",md:"6"},{default:e(()=>[t(H,{modelValue:x.value,"onUpdate:modelValue":o[0]||(o[0]=n=>x.value=n),label:"Buscar (por código o título)","prepend-inner-icon":"mdi-magnify",variant:"outlined",clearable:"",density:"comfortable"},null,8,["modelValue"])]),_:1}),t(b,{cols:"12",md:"6"},{default:e(()=>[t(Q,{modelValue:p.value,"onUpdate:modelValue":o[1]||(o[1]=n=>p.value=n),items:N.value,label:"Mostrar",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),t(h,{class:"py-0"},{default:e(()=>[(_(!0),j(B,null,le(w.value,n=>(_(),j(B,{key:n.id},[n.tipo==="proyecto"?(_(),y(u,{key:0,value:n,class:"mb-2"},{prepend:e(()=>[t(I,{color:"primary",class:"mr-4"},{default:e(()=>[t(r,{dark:""},{default:e(()=>o[4]||(o[4]=[l("mdi-folder-text-outline")])),_:1,__:[4]})]),_:1})]),append:e(()=>[i("div",re,[t(K,{text:"Proceso de planificación",location:"top"},{activator:e(({props:Y})=>[t(J,ne({ref_for:!0},Y,{icon:"mdi-calendar-text",variant:"text",color:"secondary",to:`/proyecto/${n.id}/planificar`}),null,16,["to"])]),_:2},1024),o[6]||(o[6]=i("div",{class:"d-flex"},null,-1))])]),default:e(()=>[t(c,{class:"font-weight-bold"},{default:e(()=>[l(d(n.titulo),1)]),_:2},1024),t(f,{class:"mt-1"},{default:e(()=>[i("div",ie,[t(T,{small:"",color:"primary","text-color":"white",class:"mr-2"},{default:e(()=>o[5]||(o[5]=[l(" En Planificación ")])),_:1,__:[5]}),i("span",null,"Código: "+d(n.codigo),1)]),i("div",de,d(n.descripcion),1)]),_:2},1024)]),_:2},1032,["value"])):(_(),y(u,{key:1,value:n,class:"mb-2"},{prepend:e(()=>[t(I,{color:"orange",class:"mr-4"},{default:e(()=>[t(r,{dark:""},{default:e(()=>o[7]||(o[7]=[l("mdi-checkbox-marked-circle-outline")])),_:1,__:[7]})]),_:1})]),append:e(()=>o[8]||(o[8]=[i("div",{class:"d-flex"},null,-1)])),default:e(()=>[t(c,{class:"font-weight-bold"},{default:e(()=>[l(d(n.titulo),1)]),_:2},1024),t(f,{class:"mt-1"},{default:e(()=>[i("div",ce,[t(T,{small:"",color:"orange","text-color":"white",class:"mr-2"},{default:e(()=>[l(d(n.estado),1)]),_:2},1024),i("span",null,"Código: "+d(n.codigo),1)]),i("div",ue,d(n.responsable),1),t(O,{"model-value":n.avance,height:"8",color:"light-green",class:"mt-2"},null,8,["model-value"]),i("div",_e,[i("span",pe,"Avance: "+d(n.avance)+"%",1),i("span",ve,d(n.fecha),1)])]),_:2},1024)]),_:2},1032,["value"])),t(W)],64))),128)),w.value.length===0?(_(),y(u,{key:0},{default:e(()=>[t(c,{class:"text-grey"},{default:e(()=>o[9]||(o[9]=[l("No se encontraron elementos")])),_:1,__:[9]})]),_:1})):U("",!0)]),_:1})]),_:1})]),_:1}),t(b,{cols:"12",md:"4",lg:"3"},{default:e(()=>[t(L,{elevation:"2"},{default:e(()=>[t(V,{class:"primary white--text"},{default:e(()=>[t(r,{left:""},{default:e(()=>o[10]||(o[10]=[l("mdi-chart-box")])),_:1,__:[10]}),o[11]||(o[11]=l(" Resumen "))]),_:1,__:[11]}),t(h,{density:"comfortable"},{default:e(()=>[t(u,null,{prepend:e(()=>[t(r,{color:"primary"},{default:e(()=>o[12]||(o[12]=[l("mdi-folder")])),_:1,__:[12]})]),default:e(()=>[t(c,null,{default:e(()=>o[13]||(o[13]=[l("Proyectos en planificación")])),_:1,__:[13]}),t(f,{class:"text-right"},{default:e(()=>[l(d(A.value.length),1)]),_:1})]),_:1}),t(u,null,{prepend:e(()=>[t(r,{color:"orange"},{default:e(()=>o[14]||(o[14]=[l("mdi-checkbox-marked-circle-outline")])),_:1,__:[14]})]),default:e(()=>[t(c,null,{default:e(()=>o[15]||(o[15]=[l("Actividades PEI")])),_:1,__:[15]}),t(f,{class:"text-right"},{default:e(()=>[l(d(v.value.length),1)]),_:1})]),_:1}),t(u,null,{prepend:e(()=>[t(r,{color:"green"},{default:e(()=>o[16]||(o[16]=[l("mdi-check-all")])),_:1,__:[16]})]),default:e(()=>[t(c,null,{default:e(()=>o[17]||(o[17]=[l("Actividades completadas")])),_:1,__:[17]}),t(f,{class:"text-right"},{default:e(()=>[l(d(D.value),1)]),_:1})]),_:1}),t(u,null,{prepend:e(()=>[t(r,{color:"blue"},{default:e(()=>o[18]||(o[18]=[l("mdi-progress-check")])),_:1,__:[18]})]),default:e(()=>[t(c,null,{default:e(()=>o[19]||(o[19]=[l("Avance promedio")])),_:1,__:[19]}),t(f,{class:"text-right"},{default:e(()=>[l(d(q.value)+"% ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1})}}},be=ee(me,[["__scopeId","data-v-11cadee5"]]);export{be as default};
