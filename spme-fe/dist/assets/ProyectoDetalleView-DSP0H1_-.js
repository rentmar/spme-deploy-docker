import{u as re,a as de}from"./proyectoStore-DvgR2axb.js";import{e as n,b as v,f as c,F as D,j as R,g as P,w as t,d as e,i as o,l as u,t as s,h as k,_ as _e,n as ue,s as ee,c as H,o as pe,k as i}from"./index-BV9e5Yt5.js";import{a as me,b as ve}from"./formatters-CqNDYFfu.js";import{P as fe}from"./PaginaTituloIcono-CW0YRi1P.js";import"./proyectoService-wNf4fISD.js";const ge={class:"text-subtitle-1"},ye={class:"mb-3"},J={__name:"IndicadoresLista",props:{indicadores:{type:Array,default:()=>[]}},setup(A){const Q=y=>y==="SMART"?"green":"blue";return(y,$)=>{const w=n("v-chip"),p=n("v-card-title"),h=n("v-icon"),C=n("v-table"),b=n("v-card-text"),S=n("v-card");return c(),v("div",null,[(c(!0),v(D,null,R(A.indicadores,(f,T)=>(c(),P(S,{key:T,variant:"outlined",class:"mb-3"},{default:t(()=>[e(p,{class:"d-flex align-center"},{default:t(()=>[e(w,{color:Q(f.tipo),size:"small",class:"mr-3"},{default:t(()=>[u(s(f.codigo),1)]),_:2},1032,["color"]),o("span",ge,s(f.redaccion),1)]),_:2},1024),e(b,null,{default:t(()=>[o("div",ye,[e(w,{size:"small",class:"mr-2"},{default:t(()=>[e(h,{icon:"mdi-account-group",left:"",size:"small"}),u(" "+s(f.target_poblacion),1)]),_:2},1024),e(w,{size:"small"},{default:t(()=>[e(h,{icon:"mdi-source-repository",left:"",size:"small"}),u(" "+s(f.fuente_verificacion),1)]),_:2},1024)]),e(C,{density:"compact"},{default:t(()=>[$[0]||($[0]=o("thead",null,[o("tr",null,[o("th",null,"Línea Base"),o("th",null,"Q1"),o("th",null,"Q2"),o("th",null,"Q3"),o("th",null,"Q4")])],-1)),o("tbody",null,[o("tr",null,[o("td",null,s(f.baseline||"-"),1),o("td",null,s(f.target_q1||"-"),1),o("td",null,s(f.target_q2||"-"),1),o("td",null,s(f.target_q3||"-"),1),o("td",null,s(f.target_q4||"-"),1)])])]),_:2,__:[0]},1024)]),_:2},1024)]),_:2},1024))),128))])}}},xe={class:"d-flex align-center"},he={class:"mb-4"},be={key:0,class:"mb-4"},ke={__name:"ProductosLista",props:{items:{type:Array,default:()=>[]}},emits:["ver-indicadores"],setup(A){return(Q,y)=>{const $=n("v-chip"),w=n("v-spacer"),p=n("v-icon"),h=n("v-expansion-panel-title"),C=n("v-alert"),b=n("v-btn"),S=n("v-expansion-panel-text"),f=n("v-expansion-panel"),T=n("v-expansion-panels");return c(),v("div",null,[e(T,{variant:"accordion"},{default:t(()=>[(c(!0),v(D,null,R(A.items,g=>(c(),P(f,{key:g.id,class:"mb-2"},{default:t(()=>[e(h,null,{default:t(()=>[o("div",xe,[e($,{size:"small",color:"green",class:"mr-2"},{default:t(()=>[u(s(g.codigo),1)]),_:2},1024),o("span",null,s(g.descripcion.substring(0,80))+s(g.descripcion.length>80?"...":""),1),e(w),e(p,{color:g.entregado?"green":"orange"},{default:t(()=>[u(s(g.entregado?"mdi-checkbox-marked-circle":"mdi-package-variant-closed"),1)]),_:2},1032,["color"])])]),_:2},1024),e(S,null,{default:t(()=>{var V;return[o("p",he,s(g.descripcion),1),g.riesgos?(c(),v("div",be,[e(C,{type:"warning",variant:"tonal"},{default:t(()=>[y[0]||(y[0]=o("strong",null,"Riesgos:",-1)),u(" "+s(g.riesgos),1)]),_:2,__:[0]},1024)])):k("",!0),(V=g.indicadores)!=null&&V.length?(c(),P(b,{key:1,color:"primary",variant:"outlined",onClick:K=>Q.$emit("ver-indicadores",g)},{default:t(()=>[e(p,{left:""},{default:t(()=>y[1]||(y[1]=[u("mdi-chart-line")])),_:1,__:[1]}),u(" Ver indicadores ("+s(g.indicadores.length)+") ",1)]),_:2},1032,["onClick"])):(c(),P(C,{key:2,type:"info",variant:"tonal"},{default:t(()=>y[2]||(y[2]=[u(" No hay indicadores asociados a este producto ")])),_:1,__:[2]}))]}),_:2},1024)]),_:2},1024))),128))]),_:1})])}}},Pe={class:"text-h4"},ze={class:"d-flex flex-wrap mt-2"},we={key:0,class:"mb-6"},Ie={class:"d-flex align-center mb-2"},$e={class:"d-flex align-center"},Ce={class:"mb-4"},De={key:0},Re={key:1,class:"mb-6"},Se={class:"d-flex align-center mb-2"},Te={class:"d-flex align-center"},Ve={class:"mb-4"},Ne={key:0},Be={key:0,class:"mb-6"},Ee={class:"d-flex align-center"},Le={class:"mb4"},qe={key:0},Ae={key:0,class:"mb-6"},Qe={class:"d-flex align-center"},Fe={class:"mb4"},Me={key:0},Oe={class:"d-flex align-center mb-4"},Ue={class:"ml-4"},Ge={class:"text-caption text-grey"},He={class:"text-caption text-grey"},Je={class:"d-flex justify-space-between"},Ke={__name:"ProyectoDetalleView",setup(A){const y=ue().params.id,$=re(),w=de(),{proyectoActual:p,objetivosIndicadores:h,cargando:C}=ee($),{resulProductIndicadoresIdProyecto:b,cargando:S}=ee(w);console.log(b);const{obtenerProyectoPorId:f,objetivosIndPorIdProyecto:T}=$,{proyResultProdIndPorIdProyecto:g}=w,V=H(()=>C.value||S.value);pe(async()=>{await K()});const K=async()=>{try{await f(y),await T(y),await g(y)}catch(N){console.log("Error al cargar la informacion stores",N)}},W=H(()=>0),X=H(()=>0),te=H(()=>X.value/p.presupuesto*100),F=N=>{if(!N)return"No definida";const l={year:"numeric",month:"short",day:"numeric"};return new Date(N).toLocaleDateString("es-ES",l)};return(N,l)=>{const Y=n("v-progress-circular"),oe=n("v-overlay"),se=n("v-spacer"),x=n("v-chip"),B=n("v-card-title"),Z=n("v-textarea"),I=n("v-icon"),ne=n("v-form"),E=n("v-card-text"),L=n("v-card"),M=n("v-expansion-panel-title"),O=n("v-expansion-panel-text"),U=n("v-expansion-panel"),G=n("v-expansion-panels"),j=n("v-col"),le=n("v-divider"),ae=n("v-progress-linear"),ce=n("v-row"),ie=n("v-container");return c(),P(ie,null,{default:t(()=>[e(oe,{"model-value":V.value,class:"align-center justify-center"},{default:t(()=>[e(Y,{indeterminate:"",color:"primary",size:"64"}),l[0]||(l[0]=o("p",{class:"mt-4 text-h6"},"Cargando proyecto...",-1))]),_:1,__:[0]},8,["model-value"]),V.value?k("",!0):(c(),P(ce,{key:0},{default:t(()=>[e(j,{cols:"12",md:"8",lg:"9"},{default:t(()=>[e(fe,{titulo:"Detalles",icon:"mdi-eye-outline"}),e(L,{variant:"outlined",elevation:"1",class:"mb-4"},{default:t(()=>[e(B,{class:"d-flex align-center"},{default:t(()=>{var r,d;return[o("h3",Pe,"Proyecto: "+s((r=i(p))==null?void 0:r.codigo),1),e(se),e(x,{color:i(me)((d=i(p))==null?void 0:d.estado),class:"ml-2"},{default:t(()=>{var a;return[u(s(i(ve)((a=i(p))==null?void 0:a.estado)),1)]}),_:1},8,["color"])]}),_:1}),e(E,null,{default:t(()=>[e(ne,null,{default:t(()=>{var r,d;return[e(Z,{variant:"outlined",label:"Título",rows:"2","model-value":(r=i(p))==null?void 0:r.titulo,readonly:""},null,8,["model-value"]),e(Z,{variant:"outlined",label:"Descripción",rows:"5","model-value":(d=i(p))==null?void 0:d.descripcion,readonly:""},null,8,["model-value"]),o("div",ze,[e(x,{variant:"outlined",class:"mr-2 mb-2"},{default:t(()=>{var a;return[e(I,{icon:"mdi-account",left:""}),u(" "+s((a=i(p))==null?void 0:a.creado_por),1)]}),_:1}),e(x,{variant:"outlined",class:"mr-2 mb-2"},{default:t(()=>{var a;return[e(I,{icon:"mdi-office-building",left:""}),u(" "+s((a=i(p))==null?void 0:a.instancia_gestora),1)]}),_:1}),e(x,{variant:"outlined",class:"mb-2"},{default:t(()=>{var a,_;return[e(I,{icon:"mdi-calendar-range",left:""}),u(" "+s(F((a=i(p))==null?void 0:a.fecha_inicio))+" - "+s(F((_=i(p))==null?void 0:_.fecha_finalizacion)),1)]}),_:1})])]}),_:1})]),_:1})]),_:1}),e(L,{variant:"outlined",elevation:"1",class:"mb-4"},{default:t(()=>[e(B,{class:"d-flex align-center"},{default:t(()=>[e(I,{icon:"mdi-bullseye",class:"mr-2"}),l[1]||(l[1]=o("h3",{class:"text-h5"},"Objetivos del Proyecto",-1))]),_:1,__:[1]}),e(E,null,{default:t(()=>{var r,d,a,_;return[(d=(r=i(h))==null?void 0:r.objetivos_generales)!=null&&d.length?(c(),v("div",we,[o("div",Ie,[e(I,{icon:"mdi-bullseye-arrow",color:"primary",class:"mr-2"}),l[2]||(l[2]=o("h4",{class:"text-h6"},"Objetivo General",-1)),e(x,{size:"small",color:"primary",class:"ml-2"},{default:t(()=>[u(s(i(h).objetivos_generales.length),1)]),_:1})]),e(G,{variant:"accordion"},{default:t(()=>[(c(!0),v(D,null,R(i(h).objetivos_generales,(m,z)=>(c(),P(U,{key:z,class:"mb-2"},{default:t(()=>[e(M,null,{default:t(()=>[o("div",$e,[e(x,{size:"small",color:"green",class:"mr-2"},{default:t(()=>[u(s(m.codigo),1)]),_:2},1024),o("span",null,s(m.descripcion.substring(0,80))+s(m.descripcion.length>80?"...":""),1)])]),_:2},1024),e(O,null,{default:t(()=>{var q;return[o("p",Ce,s(m.descripcion),1),(q=m.indicadores)!=null&&q.length?(c(),v("div",De,[l[3]||(l[3]=o("h5",{class:"text-subtitle-1 mb-2"},"Indicadores asociados:",-1)),e(J,{indicadores:m.indicadores},null,8,["indicadores"])])):k("",!0)]}),_:2},1024)]),_:2},1024))),128))]),_:1})])):k("",!0),(_=(a=i(h))==null?void 0:a.objetivos_especificos)!=null&&_.length?(c(),v("div",Re,[o("div",Se,[e(I,{icon:"mdi-target",color:"green",class:"mr-2"}),l[4]||(l[4]=o("h4",{class:"text-h6"},"Objetivos Específicos",-1)),e(x,{size:"small",color:"green",class:"ml-2"},{default:t(()=>[u(s(i(h).objetivos_especificos.length),1)]),_:1})]),e(G,{variant:"accordion"},{default:t(()=>[(c(!0),v(D,null,R(i(h).objetivos_especificos,(m,z)=>(c(),P(U,{key:z,class:"mb-2"},{default:t(()=>[e(M,null,{default:t(()=>[o("div",Te,[e(x,{size:"small",color:"green",class:"mr-2"},{default:t(()=>[u(s(m.codigo),1)]),_:2},1024),o("span",null,s(m.descripcion.substring(0,80))+s(m.descripcion.length>80?"...":""),1)])]),_:2},1024),e(O,null,{default:t(()=>{var q;return[o("p",Ve,s(m.descripcion),1),(q=m.indicadores)!=null&&q.length?(c(),v("div",Ne,[l[5]||(l[5]=o("h5",{class:"text-subtitle-1 mb-2"},"Indicadores asociados:",-1)),e(J,{indicadores:m.indicadores},null,8,["indicadores"])])):k("",!0)]}),_:2},1024)]),_:2},1024))),128))]),_:1})])):k("",!0)]}),_:1})]),_:1}),e(L,{variant:"outlined",elevation:"1"},{default:t(()=>[e(B,{class:"d-flex align-center"},{default:t(()=>[e(I,{icon:"mdi-format-list-checks",class:"mr-2"}),l[6]||(l[6]=o("h4",{class:"text-h5"},"Resultados",-1)),e(x,{size:"small",color:"primary",class:"ml-2"},{default:t(()=>{var r,d,a;return[u(s((a=(d=(r=i(b))==null?void 0:r.data)==null?void 0:d.resultados)==null?void 0:a.length),1)]}),_:1})]),_:1,__:[6]}),e(E,null,{default:t(()=>{var r,d,a;return[(a=(d=(r=i(b))==null?void 0:r.data)==null?void 0:d.resultados)!=null&&a.length?(c(),v("div",Be,[e(G,{variant:"accordion"},{default:t(()=>[(c(!0),v(D,null,R(i(b).data.resultados,(_,m)=>(c(),P(U,{key:m,class:"mb-2"},{default:t(()=>[e(M,null,{default:t(()=>[o("div",Ee,[e(x,{size:"small",color:"green",class:"mr-2"},{default:t(()=>[u(s(_.codigo),1)]),_:2},1024),o("span",null,s(_.descripcion.substring(0,80))+s(_.descripcion.length>80?"...":""),1)])]),_:2},1024),e(O,null,{default:t(()=>{var z;return[o("p",Le,s(_.descripcion),1),(z=_.indicadores)!=null&&z.length?(c(),v("div",qe,[l[7]||(l[7]=o("h5",{class:"text-subtitle-1 mb-2"},"Indicadores asociados:",-1)),e(J,{indicadores:_.indicadores},null,8,["indicadores"])])):k("",!0)]}),_:2},1024)]),_:2},1024))),128))]),_:1})])):k("",!0)]}),_:1})]),_:1}),e(L,{variant:"outlined",elevation:"1"},{default:t(()=>[e(B,{class:"d-flex align-center"},{default:t(()=>[e(I,{icon:"mdi-format-list-checks",class:"mr-2"}),l[8]||(l[8]=o("h4",{class:"text-h5"},"Productos",-1)),e(x,{size:"small",color:"primary",class:"ml-2"},{default:t(()=>{var r,d,a;return[u(s((a=(d=(r=i(b))==null?void 0:r.data)==null?void 0:d.productos)==null?void 0:a.length),1)]}),_:1})]),_:1,__:[8]}),e(E,null,{default:t(()=>{var r,d,a;return[(a=(d=(r=i(b))==null?void 0:r.data)==null?void 0:d.productos)!=null&&a.length?(c(),v("div",Ae,[e(G,{variant:"accordion"},{default:t(()=>[(c(!0),v(D,null,R(i(b).data.productos,(_,m)=>(c(),P(U,{key:m,class:"mb-2"},{default:t(()=>[e(M,null,{default:t(()=>[o("div",Qe,[e(x,{size:"small",color:"green",class:"mr-2"},{default:t(()=>[u(s(_.codigo),1)]),_:2},1024),o("span",null,s(_.descripcion.substring(0,80))+s(_.descripcion.length>80?"...":""),1)])]),_:2},1024),e(O,null,{default:t(()=>{var z;return[o("p",Fe,s(_.descripcion),1),(z=_.indicadores)!=null&&z.length?(c(),v("div",Me,[l[9]||(l[9]=o("h5",{class:"text-subtitle-1 mb-2"},"Indicadores asociados:",-1)),e(ke,{indicadores:_.indicadores},null,8,["indicadores"])])):k("",!0)]}),_:2},1024)]),_:2},1024))),128))]),_:1})])):k("",!0)]}),_:1})]),_:1})]),_:1}),e(j,{cols:"12",md:"4",lg:"3"},{default:t(()=>[e(L,{class:"sticky-card",elevation:"6"},{default:t(()=>[e(B,{class:"bg-primary text-white"},{default:t(()=>l[10]||(l[10]=[o("h3",{class:"text-h5"},"Resumen del Proyecto",-1)])),_:1,__:[10]}),e(E,null,{default:t(()=>{var r,d,a;return[o("div",Oe,[e(Y,{rotate:360,size:80,width:10,"model-value":W.value,color:"primary"},{default:t(()=>[o("strong",null,s(W.value)+"%",1)]),_:1},8,["model-value"]),o("div",Ue,[l[11]||(l[11]=o("div",{class:"text-subtitle-1"},"Progreso total",-1)),o("div",Ge," Inicio: "+s(F((r=i(p))==null?void 0:r.fecha_inicio)),1),o("div",He," Fin: "+s(F((d=i(p))==null?void 0:d.fecha_finalizacion)),1)])]),e(le,{class:"my-3"}),l[13]||(l[13]=o("h3",{class:"mb-2"},"Presupuesto",-1)),o("div",Je,[l[12]||(l[12]=o("span",null,"Utilizado",-1)),o("span",null,"$"+s(X.value)+" / $"+s(((a=i(p))==null?void 0:a.presupuesto)||0),1)]),e(ae,{"model-value":te.value,height:"15",color:"deep-purple-accent-4",rounded:"",class:"mt-1"},{default:t(({value:_})=>[o("strong",null,s(Math.ceil(_))+"%",1)]),_:1},8,["model-value"])]}),_:1,__:[13]})]),_:1})]),_:1})]),_:1}))]),_:1})}}},et=_e(Ke,[["__scopeId","data-v-806a2bb6"]]);export{et as default};
