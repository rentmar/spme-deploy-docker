import{y as F,r as c,c as G,z as M,e as r,g,f as y,w as l,d as e,h as T,l as d,t as A,p as H}from"./index-BV9e5Yt5.js";import{u as I,a as J,f as K}from"./ProyectoEstructuraView-DVKqiHsd.js";import"./proyectoStore-DvgR2axb.js";import"./proyectoService-wNf4fISD.js";import"./PaginaTituloIcono-CW0YRi1P.js";import"./ProyectoHeader-D5OgEq0F.js";import"./formatters-CqNDYFfu.js";import"./useInstanciaGestora-cSU6cze7.js";import"./peiService-DMb0o3t4.js";import"./xlsx-CM-TUkP_.js";import"./useProcedenciaFondos-DCzG2v-v.js";import"./ConfirmDialog-C6-Dbl5P.js";import"./useConfirmDialog-D-apekYG.js";/* empty css                                                                               */const uo={__name:"ResultadoOgNodoForm",props:{node:{type:Object,required:!0,default:()=>({id:null,data:{nodoProyecto:{codigo:"",descripcion:""}}})}},emits:["guardar","cancelar","eliminar"],setup(V,{emit:C}){const s=V,{updateResultadoOg:x}=K(),{getNodes:b,getEdges:w,updateNode:P}=I(),{actualizarNodosEdges:N}=J(),k=C,E=F("proyectoEstructura"),t=c({...s.node.data}),p=c(!1),u=c(!1),v=G(()=>!s.node.id);M(()=>s.node,n=>{t.value={...n.data}},{deep:!0});const U=async()=>{try{const n=t.value.nodoProyecto.id,o=E.value.mapa_nodo.id;console.log(n),console.log(o),await x(n,t.value.nodoProyecto),P(t.value.id,t.value),await N(o,b.value,w.value),k("guardar")}catch(n){console.error("Update informacion",n)}},D=()=>{u.value=!0},R=async()=>{u.value=!1,p.value=!0};return(n,o)=>{const q=r("v-text-field"),m=r("v-textarea"),_=r("v-spacer"),i=r("v-btn"),f=r("v-card-actions"),O=r("v-icon"),S=r("v-card-title"),$=r("v-card-text"),j=r("v-card"),z=r("v-dialog"),B=r("v-form");return y(),g(B,{onSubmit:H(U,["prevent"])},{default:l(()=>[e(q,{modelValue:t.value.nodoProyecto.codigo,"onUpdate:modelValue":o[0]||(o[0]=a=>t.value.nodoProyecto.codigo=a),variant:"outlined",label:"Codigo",outlined:"",dense:"",clearable:"",rules:[a=>!!a||"Código requerido"]},null,8,["modelValue","rules"]),e(m,{modelValue:t.value.nodoProyecto.descripcion,"onUpdate:modelValue":o[1]||(o[1]=a=>t.value.nodoProyecto.descripcion=a),variant:"outlined",label:"Descripcion",outlined:"",dense:"",clearable:"",rows:"3"},null,8,["modelValue"]),e(m,{modelValue:t.value.nodoProyecto.supuestos,"onUpdate:modelValue":o[2]||(o[2]=a=>t.value.nodoProyecto.supuestos=a),variant:"outlined",label:"Supuestos",outlined:"",dense:"",clearable:"",rows:"3"},null,8,["modelValue"]),e(m,{modelValue:t.value.nodoProyecto.riesgos,"onUpdate:modelValue":o[3]||(o[3]=a=>t.value.nodoProyecto.riesgos=a),variant:"outlined",label:"Riesgos",outlined:"",dense:"",clearable:"",rows:"3"},null,8,["modelValue"]),e(f,null,{default:l(()=>[e(_),v.value?T("",!0):(y(),g(i,{key:0,color:"error",text:"",onClick:D},{default:l(()=>o[7]||(o[7]=[d(" Eliminar ")])),_:1,__:[7]})),e(i,{color:"error",text:"",onClick:o[4]||(o[4]=a=>n.$emit("cancelar"))},{default:l(()=>o[8]||(o[8]=[d("Cancelar")])),_:1,__:[8]}),e(i,{color:"primary",type:"submit",loading:p.value},{default:l(()=>[d(A(v.value?"Crear":"Guardar"),1)]),_:1},8,["loading"])]),_:1}),e(z,{modelValue:u.value,"onUpdate:modelValue":o[6]||(o[6]=a=>u.value=a),"max-width":"400"},{default:l(()=>[e(j,null,{default:l(()=>[e(S,{class:"text-h6"},{default:l(()=>[e(O,{left:"",color:"error"},{default:l(()=>o[9]||(o[9]=[d("mdi-alert-circle")])),_:1,__:[9]}),o[10]||(o[10]=d(" Confirmar eliminación "))]),_:1,__:[10]}),e($,null,{default:l(()=>o[11]||(o[11]=[d(" ¿Está seguro que desea eliminar este elemento? ")])),_:1,__:[11]}),e(f,null,{default:l(()=>[e(_),e(i,{color:"grey",variant:"text",onClick:o[5]||(o[5]=a=>u.value=!1)},{default:l(()=>o[12]||(o[12]=[d(" Cancelar ")])),_:1,__:[12]}),e(i,{color:"error",variant:"flat",onClick:R},{default:l(()=>o[13]||(o[13]=[d(" Confirmar ")])),_:1,__:[13]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{uo as default};
