import{r as x,a as B,z as N,e as n,b as R,f as m,d as e,l as C,w as a,p as T,t as $,F as j,n as D,c as G,o as S,g as y,h as k,i as I,k as V}from"./index-BV9e5Yt5.js";import{P as O}from"./PaginaTituloIcono-CW0YRi1P.js";import{_ as A}from"./ProyectoHeader-D5OgEq0F.js";import"./useProcedenciaFondos-DCzG2v-v.js";import"./useConfirmDialog-D-apekYG.js";/* empty css                                                                               */import{u as H}from"./useProyectoCrud-CvoteDjY.js";import"./formatters-CqNDYFfu.js";import"./useInstanciaGestora-cSU6cze7.js";import"./peiService-DMb0o3t4.js";import"./proyectoService-wNf4fISD.js";const J={__name:"FormularioEdicionProyecto",props:{proyecto:{type:Object,required:!0}},emits:["guardar","cancelar"],setup(b,{emit:U}){const p=b,d=U,_=x(null),s=x(!1),v=x([{id:1,instancia:"Ministerio de Educación"},{id:2,instancia:"Ministerio de Salud"},{id:3,instancia:"Ministerio de Cultura"}]),g=[r=>!!r||"Título requerido"],f=[r=>!!r||"Código requerido",r=>r.length<=20||"Máx. 20 caracteres"],l=B({...p.proyecto});N(()=>p.proyecto,r=>{Object.assign(l,r)},{immediate:!0,deep:!0});function w(){_.value.validate()&&d("guardar",{...l})}return(r,o)=>{const u=n("v-text-field"),i=n("v-col"),c=n("v-row"),q=n("v-textarea"),E=n("v-select"),M=n("v-divider"),P=n("v-btn"),F=n("v-container"),z=n("v-form");return m(),R(j,null,[e(z,{ref_key:"form",ref:_,modelValue:s.value,"onUpdate:modelValue":o[9]||(o[9]=t=>s.value=t),onSubmit:T(w,["prevent"])},{default:a(()=>[e(F,null,{default:a(()=>[e(c,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(u,{modelValue:l.codigo,"onUpdate:modelValue":o[0]||(o[0]=t=>l.codigo=t),label:"Código *",rules:f,variant:"outlined",clearable:"",counter:"20",required:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(u,{modelValue:l.titulo,"onUpdate:modelValue":o[1]||(o[1]=t=>l.titulo=t),label:"Título *",rules:g,variant:"outlined",clearable:"",counter:"200",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(q,{modelValue:l.descripcion,"onUpdate:modelValue":o[2]||(o[2]=t=>l.descripcion=t),label:"Descripción",rows:"3",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,null,{default:a(()=>[e(i,{cols:"12",md:"6"},{default:a(()=>[e(E,{modelValue:l.instancia_gestora,"onUpdate:modelValue":o[3]||(o[3]=t=>l.instancia_gestora=t),items:v.value,"item-title":"instancia","item-value":"id",label:"Instancia gestora *",rules:[t=>!!t||"Campo requerido"],variant:"outlined",clearable:"",multiple:"",chips:""},null,8,["modelValue","items","rules"])]),_:1}),e(i,{cols:"12",md:"6"},{default:a(()=>[e(u,{modelValue:l.presupuesto,"onUpdate:modelValue":o[4]||(o[4]=t=>l.presupuesto=t),modelModifiers:{number:!0},label:"Presupuesto",type:"number",step:"0.01",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,null,{default:a(()=>[e(i,{cols:"12",md:"4"},{default:a(()=>[e(u,{modelValue:l.fecha_creacion,"onUpdate:modelValue":o[5]||(o[5]=t=>l.fecha_creacion=t),label:"Fecha de creación",type:"date",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"4"},{default:a(()=>[e(u,{modelValue:l.fecha_inicio,"onUpdate:modelValue":o[6]||(o[6]=t=>l.fecha_inicio=t),label:"Fecha de inicio *",type:"date",variant:"outlined",rules:[t=>!!t||"Requerido"],clearable:""},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12",md:"4"},{default:a(()=>[e(u,{modelValue:l.fecha_finalizacion,"onUpdate:modelValue":o[7]||(o[7]=t=>l.fecha_finalizacion=t),label:"Fecha de finalización",type:"date",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(M,{class:"my-4"}),e(c,null,{default:a(()=>[e(i,{class:"text-end"},{default:a(()=>[e(P,{color:"error",variant:"text",onClick:o[8]||(o[8]=t=>r.$emit("cancelar"))},{default:a(()=>o[10]||(o[10]=[C("Cancelar")])),_:1,__:[10]}),e(P,{color:"primary",variant:"elevated",disabled:!s.value,type:"submit"},{default:a(()=>o[11]||(o[11]=[C(" Guardar Cambios ")])),_:1,__:[11]},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),C(" "+$(b.proyecto),1)],64)}}},ae={__name:"ProyectoEditView",setup(b){const p=D().params.id,{proyecto:d,obtenerProyecto:_,loading:s}=H(),v=G(()=>s.value);S(async()=>{await g()});const g=async()=>{try{await _(p)}catch(f){console.log("Error al cargar la informacion",f)}};return(f,l)=>{const w=n("v-progress-circular"),r=n("v-overlay"),o=n("v-col"),u=n("v-row"),i=n("v-container");return m(),y(i,null,{default:a(()=>[e(r,{"model-value":v.value,class:"align-center justify-center"},{default:a(()=>[e(w,{indeterminate:"",color:"primary",size:"64"}),l[0]||(l[0]=I("p",{class:"mt-4 text-h6"},"Cargando proyecto...",-1))]),_:1,__:[0]},8,["model-value"]),v.value?k("",!0):(m(),y(u,{key:0},{default:a(()=>[e(o,{cols:"12",md:"9",lg:"9",class:""},{default:a(()=>[e(O,{titulo:"Editar",icon:"mdi-pencil"}),V(d)?(m(),y(A,{key:0,proyecto:V(d)},null,8,["proyecto"])):k("",!0),V(d)?(m(),y(J,{key:1,proyecto:V(d)},null,8,["proyecto"])):k("",!0)]),_:1}),e(o,{cols:"12",md:"3",lg:"3"})]),_:1}))]),_:1})}}};export{ae as default};
